{"version":3,"sources":["media/def_usrpic.jpg","components/instruments/buttons/FollowButton.jsx","components/login-register/LoginRedirectHOC.jsx","components/users/Users.module.css","components/instruments/Instruments.module.css","components/instruments/Pagination.jsx","components/users/Users.jsx","components/users/FriendsContainer.js"],"names":["module","exports","FollowButton","isDisabled","buttonClick","isFollow","isStretched","buttonStyle","s","follow__button","follow__button_stretched","className","onClick","disabled","mapStateToProps","state","isAuth","auth","previousLocation","withLoginRedirect","Component","withLogin","this","props","location","pathname","setLocation","to","React","withRouter","connect","userId","pages","pagesCount","push","startValue","page","Number","i","toString","navigationPages","usersPage","map","p","key","Link","pageName","linkName","children","UserBlock","user","endFollowing","beginFollowing","userFrame","userFrame__picture","src","photos","small","userDefPic","alt","id","userFrame__about","name","userFrame__status","status","followed","Users","Math","ceil","totalCount","pageSize","match","params","pageNo","usersList","users","userItem","myId","isToggling","some","ElementNameHeader","text","compose","isFetching","getTogglingProfiles","getFriendsByPage","setCurrentPage","console","log","useEffect","usersUpdate"],"mappings":"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","file":"static/js/4.dfa88940.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/def_usrpic.465eaf9e.jpg\";","import s from './Buttons.module.css';\nimport React from \"react\";\n\nconst FollowButton = ({isDisabled, buttonClick, isFollow, isStretched}) => {\n    let buttonStyle = s.follow__button;\n    if (isStretched) buttonStyle += \" \" + s.follow__button_stretched;\n    if (isFollow ) {\n        return <button className={buttonStyle} onClick={buttonClick} disabled={isDisabled}>Stop following</button>;\n    } else {\n        return <button className={buttonStyle} onClick={buttonClick} disabled={isDisabled}>Follow user</button>;\n    }\n}\nexport default FollowButton;","import React from \"react\";\nimport {connect} from \"react-redux\";\n\nimport {Redirect, withRouter} from \"react-router-dom\";\nimport {setLocation} from \"../../redux/reducers/auth-reducer\";\n\n\n\nconst mapStateToProps = (state) => {\n    return {\n        isAuth: state.auth.isAuth,\n        previousLocation: state.auth.previousLocation\n    }\n}\n\nconst withLoginRedirect = (Component) => {\n\n    class withLogin extends React.Component {\n        render() {\n            if (! this.props.previousLocation || this.props.previousLocation !== this.props.location.pathname) {\n                this.props.setLocation(this.props.location.pathname)\n            }\n\n            if (this.props.isAuth)\n                return <Component {...this.props}/>\n            else\n                return <Redirect to={'login'} />\n        }\n    }\n    return withRouter(connect(mapStateToProps, {setLocation})(withLogin))\n}\n\nexport default (withLoginRedirect)\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPage\":\"Users_userPage__WLj1D\",\"userFrame\":\"Users_userFrame__aO5xN\",\"usersPage\":\"Users_usersPage__3eGJc\",\"userFrame__picture\":\"Users_userFrame__picture__2AoCn\",\"userFrame__status\":\"Users_userFrame__status__1LR5E\",\"userFrame__about\":\"Users_userFrame__about__8SRkm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersPage\":\"Instruments_usersPage__2g2i0\"};","import React from \"react\";\n\nimport s from \"./Instruments.module.css\";\n\nimport {withRouter} from \"react-router-dom\";\n\nimport Link from \"./link/Link\";\n\nconst Pages = (props) => {\n    const userId = props.userId || \"\";\n\n    let pages = [];\n\n    if (props.pagesCount > 5) {\n        pages.push('1');\n        let startValue = 2;\n        if (props.page > 3) {\n            pages.push('…')\n            startValue = Number(props.page) - 1;\n        }\n\n        for (let i = startValue; (i <= startValue + 2) && (i < Number(props.pagesCount)); i++)\n            pages.push(i.toString());\n        if (props.page < props.pagesCount - 2)\n            pages.push('…')\n        pages.push(props.pagesCount.toString())\n\n    } else {\n        for (let i = 1; i <= props.pagesCount; i++)\n            pages.push(i.toString());\n    }\n    const navigationPages = <div className={s.usersPage}>\n        &#9642;\n        {pages.map((p) => {\n            if (p === '…') return <span key={'…'}> {p} &#9642;</span>\n            if (p == props.page) return <span key={p}> <b>{p}</b> &#9642;</span>\n            return <span key={p}> <Link to={ \"/\" + props.pageName + userId + \"/\" + p} linkName={\"\" + p + \" \"}/> &#9642;</span>\n        })}\n    </div>\n\n    return (<> {navigationPages}\n               {props.children}\n               {navigationPages}\n    </>)\n\n}\n\nexport default withRouter(Pages)","import React from 'react';\nimport s from  './Users.module.css'\n\nimport {NavLink, Redirect} from \"react-router-dom\";\n\nimport userDefPic from '../../media/def_usrpic.jpg'\nimport UsersPages from '../instruments/Pagination'\nimport FollowButton from \"../instruments/buttons/FollowButton\";\nimport ElementNameHeader from \"../profile/element-name-header/ElementNameHeader\";\n\n\nconst UserBlock = ({user, isAuth, isDisabled, endFollowing, beginFollowing}) => {\n\n    const handleClickFollow =() => {\n        //если я незарегистрированный пользователь то  обработчик ничего не делает\n        //+ добавить всплывашку залогиниться\n        if (! isAuth) return\n        if (user.followed)\n            endFollowing(user.id)\n        else\n            beginFollowing(user.id)\n    }\n\n    return (\n        <div className={s.userFrame}>\n            <div className={s.userFrame__picture}>\n                {}\n                <img src={user.photos.small || userDefPic}   alt={'id=' + user.id +' userpic'}/>\n            </div>\n            <div className={s.userFrame__about}>\n                <NavLink to={'/id' + user.id}><h2>{user.name}</h2></NavLink>\n                <div className={s.userFrame__status}>{user.status}</div>\n                <FollowButton isFollow={user.followed} buttonClick={handleClickFollow} isDisabled={isDisabled}/>\n            </div>\n        </div>\n    )\n}\n\nconst Users = (props) => {\n    let pagesCount = Math.ceil(props.totalCount / props.pageSize)\n    if ((props.match.params.pageNo > pagesCount) || (props.match.params.pageNo < 1))\n        return <Redirect to={`/${props.pageName}${props.userId || \"\"}/1`} />\n\n    const usersList = props.users.map((userItem) => {\n\n        const isDisabled =  (userItem.id == props.myId) || props.isToggling.some( (id) => {return (id === userItem.id) } )\n\n        return <UserBlock user={userItem} isAuth={!!props.myId} key={userItem.id} isDisabled={isDisabled}\n                          beginFollowing={props.beginFollowing} endFollowing={props.endFollowing} />\n    })\n\n    return (\n        <ElementNameHeader text={`User count: ${props.totalCount}`}>\n            <UsersPages pagesCount={pagesCount} page={(props.match.params.pageNo || 1)} pageName={props.pageName}  userId={props.userId}>\n                {usersList}\n            </UsersPages>\n        </ElementNameHeader>\n    )\n}\n\nexport default Users;","import React, {useEffect} from 'react';\nimport {connect} from \"react-redux\";\n\nimport {compose} from \"redux\";\nimport {withRouter} from \"react-router-dom\";\n\nimport Users from \"./Users\";\n\nimport {beginFollowing, endFollowing, getFriendsByPage, setCurrentPage} from \"../../redux/reducers/users-reducer\";\nimport Preloader from \"../instruments/Preloader\";\nimport withLoginRedirect from \"../login-register/LoginRedirectHOC\";\nimport {getTogglingProfiles} from \"../../redux/selectors/users-selector\";\n\n\nconst UsersAPI = (props) => {\n\n    console.log(props.match.params)\n\n    useEffect(() => usersUpdate(), [props.match.params.pageNo, props.match.params.userId, props.myId])\n\n    let userId = props.match.params.userId ? props.match.params.userId : props.myId\n\n    const usersUpdate = () => {\n        {\n\n            props.getFriendsByPage(props.match.params.pageNo, userId)\n        }\n    }\n\n    return  <>\n        {(props.isFetching) ? <Preloader /> : <Users pageName={\"friends\"} userId={userId} {...props}  />\n    }</>\n\n}\n\nlet mapStateToProps = (state) => {\n    return {\n        totalCount: state.users.totalCount,\n        users: state.users.users,\n        isFetching: state.users.isFetching,\n        pageSize: state.users.pageSize,\n        isToggling: getTogglingProfiles(state),\n        myId: state.auth.myId\n    }\n}\n\nexport default compose (withLoginRedirect, connect(mapStateToProps, {getFriendsByPage, setCurrentPage, beginFollowing, endFollowing}), withRouter) (UsersAPI)"],"sourceRoot":""}