{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","media/def_usrpic.jpg","components/instruments/buttons/FollowButton.jsx","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","components/login-register/LoginRedirectHOC.jsx","components/users/Users.module.css","components/instruments/Instruments.module.css","components/instruments/Pagination.jsx","components/users/Users.jsx","components/users/FriendsContainer.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","module","exports","FollowButton","isDisabled","buttonClick","isFollow","isStretched","buttonStyle","s","follow__button","follow__button_stretched","className","onClick","disabled","_typeof2","obj","Symbol","iterator","constructor","_typeof","_possibleConstructorReturn","self","call","assertThisInitialized","_setPrototypeOf","p","_inherits","subClass","superClass","create","value","mapStateToProps","state","isAuth","auth","previousLocation","withLoginRedirect","Component","withLogin","this","location","pathname","setLocation","to","React","withRouter","connect","userId","pages","pagesCount","push","startValue","page","Number","toString","navigationPages","usersPage","map","Link","pageName","linkName","children","UserBlock","user","endFollowing","beginFollowing","userFrame","userFrame__picture","src","photos","small","userDefPic","alt","id","userFrame__about","name","userFrame__status","status","followed","Users","Math","ceil","totalCount","pageSize","match","params","pageNo","usersList","users","userItem","myId","isToggling","some","ElementNameHeader","text","compose","isFetching","getTogglingProfiles","getFriendsByPage","setCurrentPage","console","log","useEffect","usersUpdate"],"mappings":"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","file":"static/js/4.d6efc984.chunk.js","sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","module.exports = __webpack_public_path__ + \"static/media/def_usrpic.465eaf9e.jpg\";","import s from './Buttons.module.css';\nimport React from \"react\";\n\nconst FollowButton = ({isDisabled, buttonClick, isFollow, isStretched}) => {\n    let buttonStyle = s.follow__button;\n    if (isStretched) buttonStyle += \" \" + s.follow__button_stretched;\n    if (isFollow ) {\n        return <button className={buttonStyle} onClick={buttonClick} disabled={isDisabled}>Stop following</button>;\n    } else {\n        return <button className={buttonStyle} onClick={buttonClick} disabled={isDisabled}>Follow user</button>;\n    }\n}\nexport default FollowButton;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import React from \"react\";\nimport {connect} from \"react-redux\";\n\nimport {Redirect, withRouter} from \"react-router-dom\";\nimport {setLocation} from \"../../redux/reducers/auth-reducer\";\n\n\n\nconst mapStateToProps = (state) => {\n    return {\n        isAuth: state.auth.isAuth,\n        previousLocation: state.auth.previousLocation\n    }\n}\n\nconst withLoginRedirect = (Component) => {\n\n    class withLogin extends React.Component {\n        render() {\n            if (! this.props.previousLocation || this.props.previousLocation !== this.props.location.pathname) {\n                this.props.setLocation(this.props.location.pathname)\n            }\n\n            if (this.props.isAuth)\n                return <Component {...this.props}/>\n            else\n                return <Redirect to={'login'} />\n        }\n    }\n    return withRouter(connect(mapStateToProps, {setLocation})(withLogin))\n}\n\nexport default (withLoginRedirect)\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPage\":\"Users_userPage__WLj1D\",\"userFrame\":\"Users_userFrame__aO5xN\",\"usersPage\":\"Users_usersPage__3eGJc\",\"userFrame__picture\":\"Users_userFrame__picture__2AoCn\",\"userFrame__status\":\"Users_userFrame__status__1LR5E\",\"userFrame__about\":\"Users_userFrame__about__8SRkm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersPage\":\"Instruments_usersPage__2g2i0\"};","import React from \"react\";\n\nimport s from \"./Instruments.module.css\";\n\nimport {withRouter} from \"react-router-dom\";\n\nimport Link from \"./link/Link\";\n\nconst Pages = (props) => {\n    const userId = props.userId || \"\";\n\n    let pages = [];\n\n    if (props.pagesCount > 5) {\n        pages.push('1');\n        let startValue = 2;\n        if (props.page > 3) {\n            pages.push('…')\n            startValue = Number(props.page) - 1;\n        }\n\n        for (let i = startValue; (i <= startValue + 2) && (i < Number(props.pagesCount)); i++)\n            pages.push(i.toString());\n        if (props.page < props.pagesCount - 2)\n            pages.push('…')\n        pages.push(props.pagesCount.toString())\n\n    } else {\n        for (let i = 1; i <= props.pagesCount; i++)\n            pages.push(i.toString());\n    }\n    const navigationPages = <div className={s.usersPage}>\n        &#9642;\n        {pages.map((p) => {\n            if (p === '…') return <span key={'…'}> {p} &#9642;</span>\n            if (p == props.page) return <span key={p}> <b>{p}</b> &#9642;</span>\n            return <span key={p}> <Link to={ \"/\" + props.pageName + userId + \"/\" + p} linkName={\"\" + p + \" \"}/> &#9642;</span>\n        })}\n    </div>\n\n    return (<> {navigationPages}\n               {props.children}\n               {navigationPages}\n    </>)\n\n}\n\nexport default withRouter(Pages)","import React from 'react';\nimport s from  './Users.module.css'\n\nimport {NavLink, Redirect} from \"react-router-dom\";\n\nimport userDefPic from '../../media/def_usrpic.jpg'\nimport UsersPages from '../instruments/Pagination'\nimport FollowButton from \"../instruments/buttons/FollowButton\";\nimport ElementNameHeader from \"../profile/element-name-header/ElementNameHeader\";\n\n\nconst UserBlock = ({user, isAuth, isDisabled, endFollowing, beginFollowing}) => {\n\n    const handleClickFollow =() => {\n        //если я незарегистрированный пользователь то  обработчик ничего не делает\n        //+ добавить всплывашку залогиниться\n        if (! isAuth) return\n        if (user.followed)\n            endFollowing(user.id)\n        else\n            beginFollowing(user.id)\n    }\n\n    return (\n        <div className={s.userFrame}>\n            <div className={s.userFrame__picture}>\n                {}\n                <img src={user.photos.small || userDefPic}   alt={'id=' + user.id +' userpic'}/>\n            </div>\n            <div className={s.userFrame__about}>\n                <NavLink to={'/id' + user.id}><h2>{user.name}</h2></NavLink>\n                <div className={s.userFrame__status}>{user.status}</div>\n                <FollowButton isFollow={user.followed} buttonClick={handleClickFollow} isDisabled={isDisabled}/>\n            </div>\n        </div>\n    )\n}\n\nconst Users = (props) => {\n    let pagesCount = Math.ceil(props.totalCount / props.pageSize)\n    if ((props.match.params.pageNo > pagesCount) || (props.match.params.pageNo < 1))\n        return <Redirect to={`/${props.pageName}${props.userId || \"\"}/1`} />\n\n    const usersList = props.users.map((userItem) => {\n\n        const isDisabled =  (userItem.id == props.myId) || props.isToggling.some( (id) => {return (id === userItem.id) } )\n\n        return <UserBlock user={userItem} isAuth={!!props.myId} key={userItem.id} isDisabled={isDisabled}\n                          beginFollowing={props.beginFollowing} endFollowing={props.endFollowing} />\n    })\n\n    return (\n        <ElementNameHeader text={`User count: ${props.totalCount}`}>\n            <UsersPages pagesCount={pagesCount} page={(props.match.params.pageNo || 1)} pageName={props.pageName}  userId={props.userId}>\n                {usersList}\n            </UsersPages>\n        </ElementNameHeader>\n    )\n}\n\nexport default Users;","import React, {useEffect} from 'react';\nimport {connect} from \"react-redux\";\n\nimport {compose} from \"redux\";\nimport {withRouter} from \"react-router-dom\";\n\nimport Users from \"./Users\";\n\nimport {beginFollowing, endFollowing, getFriendsByPage, setCurrentPage} from \"../../redux/reducers/users-reducer\";\nimport Preloader from \"../instruments/Preloader\";\nimport withLoginRedirect from \"../login-register/LoginRedirectHOC\";\nimport {getTogglingProfiles} from \"../../redux/selectors/users-selector\";\n\n\nconst UsersAPI = (props) => {\n\n    console.log(props.match.params)\n\n    useEffect(() => usersUpdate(), [props.match.params.pageNo, props.match.params.userId, props.myId])\n\n    let userId = props.match.params.userId ? props.match.params.userId : props.myId\n\n    const usersUpdate = () => {\n        {\n\n            props.getFriendsByPage(props.match.params.pageNo, userId)\n        }\n    }\n\n    return  <>\n        {(props.isFetching) ? <Preloader /> : <Users pageName={\"friends\"} userId={userId} {...props}  />\n    }</>\n\n}\n\nlet mapStateToProps = (state) => {\n    return {\n        totalCount: state.users.totalCount,\n        users: state.users.users,\n        isFetching: state.users.isFetching,\n        pageSize: state.users.pageSize,\n        isToggling: getTogglingProfiles(state),\n        myId: state.auth.myId\n    }\n}\n\nexport default compose (withLoginRedirect, connect(mapStateToProps, {getFriendsByPage, setCurrentPage, beginFollowing, endFollowing}), withRouter) (UsersAPI)"],"sourceRoot":""}