(window["webpackJsonpold-ontach"]=window["webpackJsonpold-ontach"]||[]).push([[3],{295:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}a.d(t,"a",function(){return n})},296:function(e,t,a){"use strict";function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}a.d(t,"a",function(){return r})},297:function(e,t,a){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}a.d(t,"a",function(){return n})},298:function(e,t,a){e.exports=a.p+"static/media/def_usrpic.465eaf9e.jpg"},299:function(e,t,a){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return(r="function"===typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return n(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)})(e)}var o=a(101);function l(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?Object(o.a)(e):t}a.d(t,"a",function(){return l})},300:function(e,t,a){"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}a.d(t,"a",function(){return r})},301:function(e,t,a){e.exports={profileInfo:"ProfileInfo_profileInfo__1_Ogf",profileInfo__label:"ProfileInfo_profileInfo__label__3Zwp_",profileInfo__data:"ProfileInfo_profileInfo__data__1aAll"}},302:function(e,t,a){"use strict";var n=a(295),r=a(296),o=a(299),l=a(297),i=a(300),s=a(0),c=a.n(s),u=a(11),f=a(34),p=function(e){return{isAuth:e.auth.isAuth}};t.a=function(e){var t=function(t){function a(){return Object(n.a)(this,a),Object(o.a)(this,Object(l.a)(a).apply(this,arguments))}return Object(i.a)(a,t),Object(r.a)(a,[{key:"render",value:function(){return this.props.isAuth?c.a.createElement(e,this.props):c.a.createElement(f.a,{to:"login"})}}]),a}(c.a.Component);return Object(u.b)(p,{})(t)}},306:function(e,t,a){e.exports={profilePage:"Profile_profilePage__366-F",profileData:"Profile_profileData__lNJms",userInfo__header:"Profile_userInfo__header__yIqv2",userInfo__header_edited:"Profile_userInfo__header_edited__DyKol",leftBlock:"Profile_leftBlock__3jHU2"}},307:function(e,t,a){e.exports={userStatus:"UserStatus_userStatus__tuLty",userStatus__lastUpdate:"UserStatus_userStatus__lastUpdate__3pUHQ"}},308:function(e,t,a){e.exports={badgeProfile__header:"BadgeHeader_badgeProfile__header__1K1kq",badgeProfile__header_open:"BadgeHeader_badgeProfile__header_open___GFCr",badgeProfile__header_roll:"BadgeHeader_badgeProfile__header_roll__3zMKS"}},309:function(e,t,a){e.exports={someUsers:"SomeFriendsBlock_someUsers__3EcNE",profile__small:"SomeFriendsBlock_profile__small__3yXq8",profileImage:"SomeFriendsBlock_profileImage__g5Mjf",subBadge:"SomeFriendsBlock_subBadge__1L4Jy",subBadge__all:"SomeFriendsBlock_subBadge__all__39zcK"}},310:function(e,t,a){e.exports=a.p+"static/media/def_usrpic_small.d63d672f.jpg"},311:function(e,t,a){e.exports={percentValue:"RateProfile_percentValue__3ddfL",rateBlock:"RateProfile_rateBlock__2PCYi",rateBlock__filled:"RateProfile_rateBlock__filled__3gJiY",rateBlock__empty:"RateProfile_rateBlock__empty__2LJQZ"}},314:function(e,t,a){"use strict";a.r(t);var n=a(295),r=a(296),o=a(299),l=a(297),i=a(300),s=a(0),c=a.n(s),u=a(11),f=a(8),p=a(34),m=a(70),d=Object(m.a)(function(e){return e.users.friends},function(e){var t=e.profiles;if(t.length<=4)return e;for(var a=[],n=[],r=0;r<4;r++){for(var o=Math.floor(Math.random()*t.length);a.includes(o);)o=(o+1)%t.length;a.push(o),n.push(t[o])}return{profiles:n,totalCount:e.totalCount}}),_=a(132),h=a(69),b=a(100),g=a(65),E=a(306),y=a.n(E),v=a(39),k=a(307),O=a.n(k),P=function(e){var t=e.statusText,a=e.setStatus,n=e.isOwner,r=Object(s.useState)(!1),o=Object(g.a)(r,2),l=o[0],i=o[1],u=Object(s.useState)(t),f=Object(g.a)(u,2),p=f[0],m=f[1];Object(s.useEffect)(function(){m(t)},[t]);return c.a.createElement("div",{className:O.a.userStatus},l?c.a.createElement("input",{autoFocus:!0,placeholder:"Change status",value:p,onChange:function(e){m(e.target.value)},onBlur:function(e){i(!1),a(p)}}):c.a.createElement(c.a.Fragment,null,n?c.a.createElement("a",{onDoubleClick:function(){i(!0)}},!t||t.length<1?"Create your status!":t):c.a.createElement("a",null," ",t),c.a.createElement("div",{className:O.a.userStatus__lastUpdate},"updated 5 years ago")))},j=a(301),N=a.n(j),S=a(25),I=function(e){var t=e.link,a=e.children,n=e.label,r=t?c.a.createElement(S.a,{to:t,linkName:a,isExternal:!0}):c.a.createElement(c.a.Fragment,null,a);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:N.a.profileInfo__label},n),c.a.createElement("div",{className:N.a.profileInfo__data},r))},F=function(e){var t=e.aboutMe,a=e.lookingForAJob,n=e.description;return c.a.createElement("div",{className:N.a.profileInfo},c.a.createElement(I,{label:"About me:"},t),c.a.createElement(I,{label:"Looking for a job:"}," ",a?"Yes":"No"),c.a.createElement(I,{label:"Professional skills"},n," "))},B=a(134),x=a(308),U=a.n(x),w=function(e){return function(t){function a(e){var t;return Object(n.a)(this,a),(t=Object(o.a)(this,Object(l.a)(a).call(this,e))).toggleBadge=function(){t.setState({isOpen:!t.state.isOpen})},t.state={isOpen:!0},t}return Object(i.a)(a,t),Object(r.a)(a,[{key:"render",value:function(){return this.state.isOpen?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:U.a.badgeProfile__header+" "+U.a.badgeProfile__header_open,onClick:this.toggleBadge},c.a.createElement("h2",null,this.props.text," ")),c.a.createElement(e,this.props)):c.a.createElement("div",{className:U.a.badgeProfile__header+" "+U.a.badgeProfile__header_roll,onClick:this.toggleBadge},c.a.createElement("h2",null,this.props.text,c.a.createElement("span",null,this.props.count?" ("+this.props.count+")":"")))}}]),a}(c.a.Component)},C=a(76),M=w(function(e){var t=e.contacts,a=e.isEdit;return t?a?c.a.createElement("div",{className:N.a.profileInfo},Object.keys(t).map(function(e){return c.a.createElement(I,{label:e,key:e},c.a.createElement(B.a,{name:"contacts."+e,component:C.a}))})):c.a.createElement("div",{className:N.a.profileInfo},Object.keys(t).map(function(e){if(t[e])return c.a.createElement(I,{link:t[e],label:e,key:e}," ",t[e]," ")})):c.a.createElement("div",null)}),A=a(298),J=a.n(A),R=a(14),T=a.n(R),q=a(94),D=a(67),L=function(e){var t=0;return Object.keys(e).map(function(a){a&&e[a]&&t++}),t},V=a(56),H=(Object(D.a)(4),Object(q.a)({form:"updateProfile",enableReinitialize:!0})(function(e){return c.a.createElement("form",{onSubmit:e.handleSubmit},c.a.createElement("div",{className:y.a.userInfo__header},c.a.createElement("div",{className:y.a.userInfo__header_edited},c.a.createElement("span",null,"Your full name:"),c.a.createElement("div",{className:T.a.loginInput+" "+T.a.loginInput__profile},c.a.createElement(B.a,{name:"fullName",component:C.a,validate:[D.b]}))),e.children),c.a.createElement("div",null,c.a.createElement("div",{className:N.a.profileInfo},c.a.createElement(I,{label:"About me:"},c.a.createElement(B.a,{name:"aboutMe",component:C.a})),c.a.createElement(I,{label:"Looking for a job:"},c.a.createElement(B.a,{name:"lookingForAJob",component:"input",type:"checkbox"})),c.a.createElement(I,{label:"Professional skills"},c.a.createElement(B.a,{name:"lookingForAJobDescription",component:C.a,multiline:!0}))),c.a.createElement(M,{contacts:e.user.contacts,isEdit:!0,text:"contacts",count:L(e.user.contacts)}),c.a.createElement(S.a,{linkName:"Cancel",onClick:e.onCancel}),e.error&&c.a.createElement("div",{className:T.a.formError}," ",e.error," "),c.a.createElement("div",{className:T.a.loginButton},c.a.createElement(V.a,null,"Save changes"))))})),K=a(133),Y=a(309),z=a.n(Y),Q=a(310),Z=a.n(Q),G=a(12),X=function(e){var t=e.count,a=(e.name,t+(1===t?" friend":" friends"));return c.a.createElement("div",{className:z.a.subBadge},c.a.createElement(S.a,{to:"/friends",linkName:a}),c.a.createElement("div",{className:z.a.subBadge__all}," ",c.a.createElement(S.a,{to:"/friends",linkName:"All"})," "))},W=w(function(e){var t=e.users,a=e.count;return c.a.createElement(c.a.Fragment,null,c.a.createElement(X,{count:a}),c.a.createElement("div",{className:z.a.someUsers},t.map(function(e){return c.a.createElement(G.b,{to:"/id"+e.id,className:z.a.profile__small,key:e.id},c.a.createElement("div",{className:z.a.profileImage,key:e.id},c.a.createElement("img",{src:e.photos.small?e.photos.small:Z.a,alt:"id"+e.id+" small userpic"})),e.name)})))}),$=a(311),ee=a.n($),te=function(e){var t=e.rateValue,a=Math.trunc(199*t/100);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:ee.a.percentValue},t+"%"),c.a.createElement("div",{className:ee.a.rateBlock},c.a.createElement("div",{style:{width:a},className:ee.a.rateBlock__filled}),c.a.createElement("div",{style:{width:199-a},className:ee.a.rateBlock__empty})))},ae=function(e){var t=e.imageLarge,a=e.userName,n=e.isOwner,r=e.uploadPhoto,o=e.setEditMode,l=e.children,i=e.rating,s=e.friends,u=t||J.a;return c.a.createElement("div",{className:y.a.leftBlock},c.a.createElement("img",{src:u,alt:a+" prfile photo",width:"200px"}),n&&c.a.createElement(c.a.Fragment,null,c.a.createElement(K.a,{onUpload:function(e){e.target.files.length&&r(e.target.files[0])}},c.a.createElement(S.a,{linkName:"Upload new user photo"})),c.a.createElement(S.a,{linkName:"Edit profile",onClick:o}),l),c.a.createElement(te,{rateValue:i}),c.a.createElement(W,{text:"friends",count:s.totalCount,users:s.profiles}))},ne=function(e){var t=e.user,a=e.setStatus,n=e.statusText,r=e.isOwner,o=e.uploadPhoto,l=e.uploadProfile,i=e.isEdit,u=e.profileUpdateFetching,f=e.friends,p=e.rating,m=Object(s.useState)(!1),d=Object(g.a)(m,2),_=d[0],h=d[1];Object(s.useEffect)(function(){h(i)},[i]);return c.a.createElement(v.a,{text:t.fullName},c.a.createElement("div",{className:y.a.profilePage},c.a.createElement(ae,{imageLarge:t.photos.large,userName:t.fullName,isOwner:r,uploadPhoto:o,setEditMode:function(){h(!0)},friends:f,rating:p}),c.a.createElement("div",{className:y.a.profileData},_&&r?c.a.createElement(H,{onSubmit:function(e){console.log(e),l(e)},user:t,initialValues:t,onCancel:function(){h(!1)}},c.a.createElement(P,{statusText:n}),u&&c.a.createElement("span",null,"profile updating...")):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:y.a.userInfo__header},t.fullName,c.a.createElement(P,{statusText:n,setStatus:a,isOwner:r})),c.a.createElement(F,{lookingForAJob:t.lookingForAJob,aboutMe:t.aboutMe,description:t.lookingForAJobDescription}),c.a.createElement(M,{text:"contacts",contacts:t.contacts,count:L(t.contacts)})))))},re=a(37),oe=(a(302),function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={editMode:!1},a.uploadUserProfile=function(){var e=a.props.match.params.userId||a.props.myId;a.props.getStatusRequest(e),a.props.getProfileRequest(e),a.props.getFriendsById(1,e)},a.setEditMode=function(e){a.setState({editMode:e||!1})},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.setEditMode(this.props.isEdit),this.uploadUserProfile()}},{key:"componentDidUpdate",value:function(e,t,a){e.match.params.userId!=this.props.match.params.userId&&this.uploadUserProfile(),e.profileUpdateFetching&&!this.props.profileUpdateFetching&&this.setEditMode(!1),!e.profileUpdateFetching&&this.props.profileUpdateFetching&&this.setEditMode(!0)}},{key:"render",value:function(){return this.props.profileFetch?c.a.createElement(re.a,null):c.a.createElement(ne,{friends:this.props.friends,rating:this.props.rating,user:this.props.user,setStatus:this.props.setStatusRequest,statusText:this.props.statusText,isEdit:this.state.editMode,uploadPhoto:this.props.uploadPhoto,uploadProfile:this.props.uploadProfile,profileUpdateFetching:this.props.profileUpdateFetching,isOwner:this.props.isAuth&&(this.props.match.params.userId==this.props.myId||this.props.isEdit)})}}]),t}(c.a.Component));t.default=Object(f.d)(p.f,Object(u.b)(function(e){return{user:Object(_.a)(e),statusText:e.profile.statusText,profileUpdateFetching:e.profile.profileUpdateFetching,myId:e.auth.myId,isAuth:e.auth.isAuth,profileFetch:e.profile.profileFetch,friends:d(e),rating:Object(_.c)(e)}},{setStatusRequest:h.d,getProfileRequest:h.a,getStatusRequest:h.b,uploadProfile:h.f,uploadPhoto:h.e,getFriendsById:b.c}))(oe)}}]);
//# sourceMappingURL=3.52957021.chunk.js.map