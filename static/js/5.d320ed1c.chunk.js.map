{"version":3,"sources":["media/def_usrpic.jpg","components/users/Users.module.css","components/instruments/Instruments.module.css","components/instruments/Pagination.jsx","components/instruments/buttons/FollowButton.jsx","components/users/Users.jsx","components/users/UsersContainer.js"],"names":["module","exports","withRouter","props","pages","pagesCount","push","startValue","page","Number","i","toString","navigationPages","className","s","usersPage","map","p","key","Link","to","pageName","linkName","children","FollowButton","isDisabled","buttonClick","isFollow","follow__button","onClick","disabled","UserBlock","isOwner","isToggling","some","id","user","userFrame","userFrame__picture","src","photos","small","userDefPic","alt","userFrame__about","name","userFrame__status","status","followed","isAuth","endFollowing","beginFollowing","Users","Math","ceil","totalCount","pageSize","match","params","pageNo","usersList","users","userItem","myId","ElementNameHeader","text","compose","connect","state","isFetching","auth","getUsers","setCurrentPage","useEffect","usersUpdate"],"mappings":"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","file":"static/js/5.d320ed1c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/def_usrpic.465eaf9e.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPage\":\"Users_userPage__WLj1D\",\"userFrame\":\"Users_userFrame__aO5xN\",\"usersPage\":\"Users_usersPage__3eGJc\",\"userFrame__picture\":\"Users_userFrame__picture__2AoCn\",\"userFrame__about\":\"Users_userFrame__about__8SRkm\",\"userFrame__status\":\"Users_userFrame__status__1LR5E\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersPage\":\"Instruments_usersPage__2g2i0\"};","import React from \"react\";\n\nimport s from \"./Instruments.module.css\";\n\nimport {withRouter} from \"react-router-dom\";\n\nimport Link from \"./link/Link\";\n\nconst Pages = (props) => {\n    let pages = [];\n\n    if (props.pagesCount > 5) {\n        pages.push('1');\n        let startValue = 2;\n        if (props.page > 3) {\n            pages.push('…')\n            startValue = Number(props.page) - 1;\n        }\n\n        for (let i = startValue; (i <= startValue + 2) && (i < Number(props.pagesCount)); i++)\n            pages.push(i.toString());\n        if (props.page < props.pagesCount - 2)\n            pages.push('…')\n        pages.push(props.pagesCount.toString())\n\n    } else {\n        for (let i = 1; i <= props.pagesCount; i++)\n            pages.push(i.toString());\n    }\n    const navigationPages = <div className={s.usersPage}>\n        &#9642;\n        {pages.map((p) => {\n            if (p === '…') return <span key={'…'}> {p} &#9642;</span>\n            if (p == props.page) return <span key={p}> <b>{p}</b> &#9642;</span>\n            return <span key={p}> <Link to={ \"/\" + props.pageName + \"/\" + p} linkName={p}/> &#9642;</span>\n        })}\n    </div>\n\n    return (<> {navigationPages}\n               {props.children}\n               {navigationPages}\n    </>)\n\n}\n\nexport default withRouter(Pages)","import s from './Buttons.module.css';\nimport React from \"react\";\n\nconst FollowButton = ({isDisabled, buttonClick, isFollow}) => {\n    if (isFollow ) {\n        return <button className={s.follow__button} onClick={buttonClick} disabled={isDisabled}>Stop following</button>;\n    } else {\n        return <button className={s.follow__button} onClick={buttonClick} disabled={isDisabled}>Follow user</button>;\n    }\n}\nexport default FollowButton;","import React from 'react';\nimport s from  './Users.module.css'\n\nimport {NavLink, Redirect} from \"react-router-dom\";\n\nimport userDefPic from '../../media/def_usrpic.jpg'\nimport UsersPages from '../instruments/Pagination'\nimport FollowButton from \"../instruments/buttons/FollowButton\";\nimport ElementNameHeader from \"../profile/element-name-header/ElementNameHeader\";\n\n\nconst UserBlock = (props) => {\n\n    const handleClickFollow =() => {\n        //если я незарегистрированный пользователь то  обработчик ничего не делает\n        //+ добавить всплывашку залогиниться\n        if (! props.isAuth) return\n        if (props.user.followed)\n            props.endFollowing(props.user.id)\n        else\n            props.beginFollowing(props.user.id)\n    }\n\n    const isDisabled = props.isOwner || props.isToggling.some( (id) => {return (id === props.user.id) } )\n\n    return (\n        <div className={s.userFrame}>\n            <div className={s.userFrame__picture}>\n                {}\n                <img src={props.user.photos.small || userDefPic}   alt={'id=' + props.user.id +' userpic'}/>\n            </div>\n            <div className={s.userFrame__about}>\n                <NavLink to={'/id' + props.user.id}><h2>{props.user.name}</h2></NavLink>\n                <div className={s.userFrame__status}>{props.user.status}</div>\n                <FollowButton isFollow={props.user.followed} buttonClick={handleClickFollow} isDisabled={isDisabled}/>\n            </div>\n        </div>\n    )\n}\n\nconst Users = (props) => {\n    let pagesCount = Math.ceil(props.totalCount / props.pageSize)\n    if ((props.match.params.pageNo > pagesCount) || (props.match.params.pageNo < 1))\n        return <Redirect to='/users/1'/>\n\n    const usersList = props.users.map((userItem) => {\n        return <UserBlock user={userItem} beginFollowing={props.beginFollowing} endFollowing={props.endFollowing} isOwner={userItem.id == props.myId} isAuth={!!props.myId}\n                          isToggling={props.isToggling} key={userItem.id}/>\n    })\n\n    return (\n        <ElementNameHeader text={`User count: ${props.totalCount}`}>\n            <UsersPages pagesCount={pagesCount} page={(props.match.params.pageNo || 1)} pageName={props.pageName} >\n                {usersList}\n            </UsersPages>\n        </ElementNameHeader>\n    )\n}\n\nexport default Users;","import React, {useEffect} from 'react';\nimport {connect} from \"react-redux\";\n\nimport {compose} from \"redux\";\nimport {withRouter} from \"react-router-dom\";\n\nimport Users from \"./Users\";\n\nimport {beginFollowing, endFollowing, getUsers, setCurrentPage} from \"../../redux/reducers/users-reducer\";\nimport Preloader from \"../instruments/Preloader\";\n\n\nconst UsersAPI = (props) => {\n\n    useEffect(() => usersUpdate(), [props.match.params.pageNo, props.myId])\n\n    const usersUpdate = () => {\n       // if ( Math.ceil(this.props.totalCount / this.props.pageSize)  >= (this.props.match.params.pageNo || 1))\n        {\n            props.getUsers(props.match.params.pageNo )\n        }\n    }\n    return  <>\n        {(props.isFetching) ? <Preloader /> : <Users pageName={\"users\"} {...props} />\n    }</>\n\n}\n\nlet mapStateToProps = (state) => {\n    return {\n        totalCount: state.users.totalCount,\n        users: state.users.users,\n        isFetching: state.users.isFetching,\n        pageSize: state.users.pageSize,\n        isToggling: state.users.isToggling,\n        myId: state.auth.myId\n    }\n}\n\nexport default compose (connect(mapStateToProps, {getUsers, setCurrentPage, beginFollowing, endFollowing}), withRouter) (UsersAPI)"],"sourceRoot":""}