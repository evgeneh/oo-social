{"version":3,"sources":["media/def_usrpic.jpg","components/instruments/buttons/FollowButton.jsx","components/users/Users.module.css","components/instruments/Instruments.module.css","components/instruments/Pagination.jsx","components/users/Users.jsx","components/users/UsersContainer.js"],"names":["module","exports","FollowButton","isDisabled","buttonClick","isFollow","isStretched","buttonStyle","s","follow__button","follow__button_stretched","className","onClick","disabled","withRouter","props","userId","pages","pagesCount","push","startValue","page","Number","i","toString","navigationPages","usersPage","map","p","key","Link","to","pageName","linkName","children","UserBlock","user","isAuth","endFollowing","beginFollowing","userFrame","userFrame__picture","src","photos","small","userDefPic","alt","id","userFrame__about","name","userFrame__status","status","followed","Users","Math","ceil","totalCount","pageSize","match","params","pageNo","usersList","users","userItem","myId","isToggling","some","ElementNameHeader","text","compose","connect","state","isFetching","auth","getUsers","setCurrentPage","useEffect","usersUpdate"],"mappings":"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","file":"static/js/5.b89a39e0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/def_usrpic.465eaf9e.jpg\";","import s from './Buttons.module.css';\nimport React from \"react\";\n\nconst FollowButton = ({isDisabled, buttonClick, isFollow, isStretched}) => {\n    let buttonStyle = s.follow__button;\n    if (isStretched) buttonStyle += \" \" + s.follow__button_stretched;\n    if (isFollow ) {\n        return <button className={buttonStyle} onClick={buttonClick} disabled={isDisabled}>Stop following</button>;\n    } else {\n        return <button className={buttonStyle} onClick={buttonClick} disabled={isDisabled}>Follow user</button>;\n    }\n}\nexport default FollowButton;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPage\":\"Users_userPage__WLj1D\",\"userFrame\":\"Users_userFrame__aO5xN\",\"usersPage\":\"Users_usersPage__3eGJc\",\"userFrame__picture\":\"Users_userFrame__picture__2AoCn\",\"userFrame__status\":\"Users_userFrame__status__1LR5E\",\"userFrame__about\":\"Users_userFrame__about__8SRkm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersPage\":\"Instruments_usersPage__2g2i0\"};","import React from \"react\";\n\nimport s from \"./Instruments.module.css\";\n\nimport {withRouter} from \"react-router-dom\";\n\nimport Link from \"./link/Link\";\n\nconst Pages = (props) => {\n    const userId = props.userId || \"\";\n\n    let pages = [];\n\n    if (props.pagesCount > 5) {\n        pages.push('1');\n        let startValue = 2;\n        if (props.page > 3) {\n            pages.push('…')\n            startValue = Number(props.page) - 1;\n        }\n\n        for (let i = startValue; (i <= startValue + 2) && (i < Number(props.pagesCount)); i++)\n            pages.push(i.toString());\n        if (props.page < props.pagesCount - 2)\n            pages.push('…')\n        pages.push(props.pagesCount.toString())\n\n    } else {\n        for (let i = 1; i <= props.pagesCount; i++)\n            pages.push(i.toString());\n    }\n    const navigationPages = <div className={s.usersPage}>\n        &#9642;\n        {pages.map((p) => {\n            if (p === '…') return <span key={'…'}> {p} &#9642;</span>\n            if (p == props.page) return <span key={p}> <b>{p}</b> &#9642;</span>\n            return <span key={p}> <Link to={ \"/\" + props.pageName + userId + \"/\" + p} linkName={\"\" + p + \" \"}/> &#9642;</span>\n        })}\n    </div>\n\n    return (<> {navigationPages}\n               {props.children}\n               {navigationPages}\n    </>)\n\n}\n\nexport default withRouter(Pages)","import React from 'react';\nimport s from  './Users.module.css'\n\nimport {NavLink, Redirect} from \"react-router-dom\";\n\nimport userDefPic from '../../media/def_usrpic.jpg'\nimport UsersPages from '../instruments/Pagination'\nimport FollowButton from \"../instruments/buttons/FollowButton\";\nimport ElementNameHeader from \"../profile/element-name-header/ElementNameHeader\";\n\n\nconst UserBlock = ({user, isAuth, isDisabled, endFollowing, beginFollowing}) => {\n\n    const handleClickFollow =() => {\n        //если я незарегистрированный пользователь то  обработчик ничего не делает\n        //+ добавить всплывашку залогиниться\n        if (! isAuth) return\n        if (user.followed)\n            endFollowing(user.id)\n        else\n            beginFollowing(user.id)\n    }\n\n    return (\n        <div className={s.userFrame}>\n            <div className={s.userFrame__picture}>\n                {}\n                <img src={user.photos.small || userDefPic}   alt={'id=' + user.id +' userpic'}/>\n            </div>\n            <div className={s.userFrame__about}>\n                <NavLink to={'/id' + user.id}><h2>{user.name}</h2></NavLink>\n                <div className={s.userFrame__status}>{user.status}</div>\n                <FollowButton isFollow={user.followed} buttonClick={handleClickFollow} isDisabled={isDisabled}/>\n            </div>\n        </div>\n    )\n}\n\nconst Users = (props) => {\n    let pagesCount = Math.ceil(props.totalCount / props.pageSize)\n    if ((props.match.params.pageNo > pagesCount) || (props.match.params.pageNo < 1))\n        return <Redirect to={`/${props.pageName}${props.userId || \"\"}/1`} />\n\n    const usersList = props.users.map((userItem) => {\n\n        const isDisabled =  (userItem.id == props.myId) || props.isToggling.some( (id) => {return (id === userItem.id) } )\n\n        return <UserBlock user={userItem} isAuth={!!props.myId} key={userItem.id} isDisabled={isDisabled}\n                          beginFollowing={props.beginFollowing} endFollowing={props.endFollowing} />\n    })\n\n    return (\n        <ElementNameHeader text={`User count: ${props.totalCount}`}>\n            <UsersPages pagesCount={pagesCount} page={(props.match.params.pageNo || 1)} pageName={props.pageName}  userId={props.userId}>\n                {usersList}\n            </UsersPages>\n        </ElementNameHeader>\n    )\n}\n\nexport default Users;","import React, {useEffect} from 'react';\nimport {connect} from \"react-redux\";\n\nimport {compose} from \"redux\";\nimport {withRouter} from \"react-router-dom\";\n\nimport Users from \"./Users\";\n\nimport {beginFollowing, endFollowing, getUsers, setCurrentPage} from \"../../redux/reducers/users-reducer\";\nimport Preloader from \"../instruments/Preloader\";\n\n\nconst UsersAPI = (props) => {\n\n    useEffect(() => usersUpdate(), [props.match.params.pageNo, props.myId])\n\n    const usersUpdate = () => {\n       // if ( Math.ceil(this.props.totalCount / this.props.pageSize)  >= (this.props.match.params.pageNo || 1))\n        {\n            props.getUsers(props.match.params.pageNo )\n        }\n    }\n    return  <>\n        {(props.isFetching) ? <Preloader /> : <Users pageName={\"users\"} {...props} />\n    }</>\n\n}\n\nlet mapStateToProps = (state) => {\n    return {\n        totalCount: state.users.totalCount,\n        users: state.users.users,\n        isFetching: state.users.isFetching,\n        pageSize: state.users.pageSize,\n        isToggling: state.users.isToggling,\n        myId: state.auth.myId\n    }\n}\n\nexport default compose (connect(mapStateToProps, {getUsers, setCurrentPage, beginFollowing, endFollowing}), withRouter) (UsersAPI)"],"sourceRoot":""}