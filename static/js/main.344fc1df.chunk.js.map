{"version":3,"sources":["redux/selectors/photos-selector.js","components/forms/searchbar-form/SearchBar.module.css","components/profile/Widjet/BadgeHeader.js","redux/selectors/users-selector.js","components/profile/Widjet/BadjeSubHeader.js","components/instruments/link/Link.jsx","redux/selectors/profile-selector.js","components/forms/FileUpload.jsx","components/profile/wall/Wall.jsx","components/profile/user-status/UserStatus.module.css","redux/selectors/wall-selector.js","media/menu.JPG","media/3Bta.gif","components/forms/Forms.module.css","components/photos/modal-photo-view/ModalPhoto.module.css","components/header/Header.module.css","components/profile/element-name-header/ElementNameHeader.jsx","components/instruments/styles/Styles.js","redux/reducers/init-reducer.js","components/header/MainMenu.jsx","components/forms/searchbar-form/SearcBar.jsx","redux/reducers/requests-reducer.js","components/sidebar/SideBar.jsx","components/sidebar/AlertsContainer.js","components/header/HeaderMobileMenu.jsx","components/header/Header.jsx","components/notes/Notes.js","components/forms/inputs-validate/CheckBox.jsx","components/forms/LoginForm.jsx","components/login-register/Login.jsx","components/login-register/LoginRedirectTo.jsx","components/photos/UploadPhotosPanel.js","components/photos/modal-photo-view/ModalPhotoView.js","components/photos/modal-photo-view/ModalPhotoViewMenu.js","components/photos/Photos.js","components/photos/PhotosContainer.js","components/footer/Footer.jsx","components/profile/wall/WallContainer.js","components/profile/dialog/DialogSingleMessage.jsx","components/profile/dialog/Dialog.jsx","redux/reducers/dialogs-reducer.js","components/profile/dialog/DialogContainer.jsx","components/profile/dialog/dialogs-list/DialogsList.jsx","components/profile/dialog/dialogs-list/MyDialogListContainer.jsx","App.js","serviceWorker.js","redux/store.js","index.js","utils/date.js","utils/array.js","redux/reducers/auth-reducer.js","redux/reducers/images-reducer.js","components/instruments/buttons/Button.jsx","components/instruments/Preloader.jsx","redux/reducers/follow-unversal.js","components/photos/Photos.module.css","components/sidebar/SideBar.module.css","components/forms/forms-validators.js","components/login-register/LoginWelcome.jsx","components/instruments/link/Link.module.css","components/forms/inputs-validate/TextBox.jsx","redux/reducers/wall-reducer.js","oosocial-api/api.js","components/profile/Widjet/BadgeHeader.module.css","redux/reducers/users-reducer.js","redux/reducers/profile-reducer.js","components/profile/wall/SinglePost.jsx","components/forms/PostAddForm.jsx","components/profile/element-name-header/ElementNameHeader.module.css","components/instruments/buttons/Buttons.module.css"],"names":["getPhotos","state","photos","items","getPhotosCount","totalCount","getSortedImages","createSelector","count","Arrays","sortBy","getSomeImages","getSomeRandom","module","exports","withBadgeHeader","BadgeContent","props","toggleBadge","setState","isOpen","this","className","s","badgeProfile__header","badgeProfile__header_open","onClick","text","badgeProfile__header_roll","React","Component","getTogglingProfiles","users","isToggling","getSomeFriends","friends","profiles","SubBadge","styled","div","SubBadgeAllRight","BadgeSubHeader","name","link","children","linkName","rightLink","undefined","to","Link","isExternal","isDisabled","navLink","navLink__disabled","extAddress","indexOf","target","href","getProfile","profile","user","getProfileFullName","fullName","getProfileFollowingFetch","userId","isTogglingArray","some","togglingId","getProfileFull","isProfileFollow","auth","myId","followStatus","isFollow","getUserRating","filledParams","totalParams","aboutMe","large","Object","keys","contacts","forEach","key","Math","trunc","reduxForm","form","error","htmlFor","style","fileUpload","type","id","onChange","onUpload","multiple","PostAddFormWall","PostAddForm","BadgeHeaderHOC","posts","pageId","addPost","useState","isOpenTextBox","setTextBoxStatus","onSubmit","value","map","post","postId","getWallPosts","wall","getSomeWallPosts","slice","ElementNameHeader","profileBorder","profileHeader","profileBorder__subBorder","DateText","span","ListContainerSection","section","SinglePostBody","p","imgWidth","escapedNewLineToLineBreakTag","string","split","item","index","initialState","initialize","SET_INITIALIZE","MainMenu","menu","menuBar","isAuth","menuBar__item","logout","path","SearchBar","searchBar","method","searchBar__text","placeholder","alerts","SET_MESSAGES_COUNT","SideBarItemWithAlert","ret","flexDirection","fontWeight","sideBar__navLi","toLowerCase","SideBar","ownerId","sideBar__nav","sideBar__profileLi","sideBar__nav__profile","sideBar__nav__profile_edit","connect","requests","isFetching","dialog","updateAlerts","dispatch","a","dialogAPI","getMessagesUnread","response","data","resultCode","messagesCount","useEffect","MenuHiddenBody","MenuHiddenBlock","MenuHidden","isMenuShow","setMenuShow","menuHidden","src","menuImage","width","onMouseUp","login","pageHeader","pageHeader__border","home","home__logo","Notes","handleNotes","CheckBox","meta","input","label","reverse","labelText","labeledCB","minLength4","minLength","handleSubmit","formBlock__inputs","formError","loginInput","Field","component","TextBox","validate","required","loginButton","loginButton_left","Button","disabled","submit","Login","previousLocation","history","push","formBlock","LoginWelcome","email","password","rememberMe","getUsers","countUpd","clearInterval","setInterval","LoginRedirectTo","conditionU","orPath","UploadPhotosPanel","currentUploading","startUpload","totalUpload","setTotalUpload","imagesControl","imagesControl__navigation","imagesControl__upload","isNonButton","FileUpload","event","files","length","ModalPhotoView","showSinglePhoto","indexImg","imgCount","imageModal","bind","imageModal__body","e","stopPropagation","imageModal_navigation","imageModal_menu__left","imageModal_menu__center","imageModal_menu__right","imageModal_imgContainer","imageModal_imgContainer__cell","ModalPhotoViewMenu","isOwner","image","setAsProfile","deletePhoto","setDescriptionReq","isDescriptionEdit","setDescriptionEdit","description","imgDescription","setImgDescription","date","dateParse","toNumbers","imageModal_menu","autoFocus","console","log","onBlur","Photos","indexImgModal","setImgModal","getPhoto","uploadPhotosRequest","imagesPanel","photo","image__preview","preview","alt","setImageAsProfilePhoto","isProfilePhotoSet","updateImageDescription","compose","withRouter","getPhotosRequest","getProfileRequest","handlePhotos","match","params","parseInt","PageFooter","Footer","postsCount","AddNewPostRequest","getWallRequest","Wall","DialogMessage","li","myPost","MessageCut","RoundUnread","DialogSingleMessage","isMyPost","isRead","toTimeString","Parent","DialogBox","DialogsList","ol","DialogData","MessageCreation","PostAddFormDialog","Dialog","messages","owner","totalMessagesCount","sendMessage","datePrev","Date","messagesEndRef","useRef","current","scrollIntoView","behaviour","reverseMessages","message","isNewDay","dateCompare","isSameDay","Fragment","toDayAndMonth","ref","currentDialogId","isMessaging","dialogsTotalCount","dialogs","SET_DIALOGS","ADD_NEW_MESSAGE","TOGGLE_FETCHING_UPDATE","SET_DIALOGS_LIST","toggleFetching","toggleMessaging","AddNewMessageRequest","messageText","getState","dialogId","toISOString","messBody","reset","GetMessagesRequest","getDialog","interval","Redirect","LastMessageBox","read","toUserPage","toStrings","lastMessage","GetDialogsRequest","getDialogList","ProfileContainer","lazy","Register","UsersContainer","FriendsContainer","isInitialized","app","initApp","getAuthRequest","then","catch","alert","exact","render","Suspense","fallback","Preloader","isEdit","PhotosContainer","WallContainer","MyDialogListContainer","DialogContainer","Boolean","window","location","hostname","rootReducer","combineReducers","action","profileReducer","authReducer","formReducer","findOneAndUpdate","usersReducer","imagesReducer","wallReducer","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","toLocaleDateString","toLocaleString","year","month","day","hour12","hour","minute","toLocaleTimeString","date1","date2","getFullYear","getMonth","getDate","itemName","itemValue","newProps","rev","sort","b","COUNT","arr","result","i","floor","random","includes","isNewUserRegistered","SET_AUTH","DELETE_AUTH","setLocation","setAuthParams","clearAuthParams","authAPI","me","err","stopSubmit","_error","register","SET_PHOTOS","SET_IMAGE_ORDER","TOGGLE_PHOTO_SET","ADD_DESCRIPTION","order","togglePhotoSet","mediaAPI","setUploadingImageOrder","savePhoto","setProfilePhoto","setAsProfilePhoto","addImageDescription","updateImage","follow__button","fetchingPic","SET_TOGGLE_FOLLOWING","setToggleFollowing","followOrUnFollowG","followMethod","isFollowing","setFollowing","minlength","values","password2","LoginWelcomeText","suffix","multiline","isError","touched","formLabel","TOGGLE_FETCHING","SET_POSTS","ADD_NEW_POST","setFetching","wallAPI","getWall","instance","axios","baseURL","withCredentials","savePhotoSingle","route","formData","FormData","append","put","headers","usersAPI","getByPage","page","get","follow","unfollow","delete","getFriends","getFriendsById","profileAPI","getStatus","setStatus","statusText","status","getUserProfile","setProfile","getFollowStatus","payload","followed","small","currentPage","pageSize","SET_USERS","SET_USERS_PAGE","CHANGE_FOLLOWING_STATUS","SET_FRIENDS","filter","setUsers","setCurrentPage","setFollowingStatus","beginFollowing","endFollowing","getFriendsRequest","setFriendsMethod","setFriends","getFriendsByPage","communities","profileUpdateFetching","profileFetch","SET_STATUS","SET_PROFILE","SET_PHOTO","SET_FOLLOW_STATUS","UPDATE_PROFILE_FETCHING","GET_PROFILE_FETCH_TOGGLE","userProfile","newState","uploadProfileFetching","setFollowStatus","getProfileFetch","setStatusRequest","getStatusRequest","uploadProfile","errMessage","contactError","getContactError","submitERROR","JSON","parse","contactsPos","uploadPhoto","singleProfileFollow","singleProfileUnfollow","Title","Text","PostFooter","SinglePost","userStatus__lastUpdate","MessageContainer","PostSubmit"],"mappings":"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","file":"static/js/main.344fc1df.chunk.js","sourcesContent":["import {createSelector} from \"reselect\";\r\n\r\nimport {Arrays} from \"../../utils/array\";\r\n\r\nconst getPhotos = (state) => {\r\n    return state.photos.items;\r\n}\r\n\r\nexport const getPhotosCount = (state) => {\r\n    return state.photos.totalCount;\r\n}\r\n\r\nexport const getSortedImages = createSelector(getPhotos, getPhotosCount, (photos, count) => {\r\n\r\n        return Arrays.sortBy(photos, \"date\",  true);\r\n})\r\n\r\nexport const getSomeImages = createSelector(getPhotos, (photos) => {\r\n\r\n    return  Arrays.getSomeRandom(photos, 2)\r\n})","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchBar\":\"SearchBar_searchBar__282rX\",\"searchBar__text\":\"SearchBar_searchBar__text__2vTfY\"};","import React from 'react';\nimport s from './BadgeHeader.module.css'\n\nconst withBadgeHeader = (BadgeContent) => {\n    return class extends React.Component {\n        constructor(props) {\n            super(props);\n            this.state = {isOpen: true}\n        }\n\n        toggleBadge = () => {\n            this.setState({isOpen: !this.state.isOpen})\n        }\n\n        render() {\n\n            if (this.state.isOpen)\n                return (\n                    <>\n                        <div className={s.badgeProfile__header + ' ' + s.badgeProfile__header_open}\n                             onClick={this.toggleBadge}>\n                            <h2>{this.props.text} </h2>\n                        </div>\n                        <BadgeContent {...this.props}/>\n                    </>\n                )\n            else return (\n\n                <div className={s.badgeProfile__header + ' ' + s.badgeProfile__header_roll} onClick={this.toggleBadge}>\n                    <h2>{this.props.text}<span>{(this.props.count) ? ' (' + this.props.count + ')' : ''}</span></h2>\n                </div>\n            )\n        }\n    }\n}\n\nexport default withBadgeHeader;","import {createSelector} from \"reselect\"\r\nimport {Arrays} from \"../../utils/array\";\r\n\r\nconst getFriends = (state) => {\r\n    return state.users.friends;\r\n}\r\n\r\nexport const getTogglingProfiles = (state) => {\r\n    return state.users.isToggling;\r\n}\r\n\r\n\r\n\r\nexport const getSomeFriends = createSelector(getFriends, (friends) => {\r\n\r\n    return {profiles: Arrays.getSomeRandom(friends.profiles, 4),\r\n        totalCount: friends.totalCount\r\n    }\r\n\r\n})\r\n","import React from 'react';\r\n\r\nimport Link from \"../../instruments/link/Link\";\r\n\r\nimport styled from \"styled-components\"\r\n\r\nconst SubBadge = styled.div`\r\n    text-align: left;\r\n    padding: 2px 8px 2px 8px;\r\n    border-top: solid 1px #ccc;\r\n    background: #eee;\r\n    margin-bottom: 2px;\r\n`;\r\n\r\nconst SubBadgeAllRight = styled.div`\r\n    text-align: right;\r\n    float: right;\r\n`;\r\n\r\n\r\nconst  BadgeSubHeader = ({count, name, link, children}) => {\r\n    const linkName = count + \" \" + name;\r\n\r\n    const rightLink = (children === undefined) ? <Link to={link} linkName={'All'} /> : children\r\n\r\n    return (<SubBadge>\r\n            <Link to={link} linkName={linkName} />\r\n            <SubBadgeAllRight >{rightLink}</SubBadgeAllRight>\r\n        </SubBadge>\r\n    )\r\n}\r\n\r\nexport default BadgeSubHeader\r\n","import React from \"react\";\nimport {NavLink} from \"react-router-dom\";\n\nimport s from './Link.module.css'\n\n//\nconst Link = ({to, linkName, isExternal, onClick, isDisabled}) => {\n    //для ссылок на сторонние Url флаг isExternal\n    if (isDisabled)\n        return <span className={s.navLink + \" \" + s.navLink__disabled} >{linkName}</span>\n    if (!to)\n        //for lonks with event not routing\n        return  <span className={s.navLink} onClick={onClick}>{linkName}</span>\n    if (isExternal){\n        let extAddress = to;\n        if (to.indexOf('https://') < 0 && to.indexOf('localhost:') < 0)\n            extAddress = 'https://' + to\n        return <a target='_blank' className={s.navLink} href={extAddress}  onClick={onClick}>{linkName}</a>\n    }\n    return (<NavLink className={s.navLink} to={to} onClick={onClick}>{linkName}</NavLink>)\n}\n\nexport default Link;","import {createSelector} from \"reselect\"\r\n\r\nimport {getTogglingProfiles} from \"./users-selector\";\r\n\r\n\r\nexport const getProfileId = (state) => {\r\n    return  state.profile.user.userId;\r\n}\r\n\r\nexport const getProfile = (state) => {\r\n    return  state.profile.user;\r\n}\r\n\r\nconst getFollowStatus = (state) => {\r\n    return state.profile.isProfileFollow;\r\n}\r\n\r\nexport const getProfileFullName = (state) => {\r\n    return  state.profile.user.fullName;\r\n}\r\n\r\nconst getMyId = (state) => {\r\n    return state.auth.myId;\r\n}\r\n\r\nexport const getProfileFollowingFetch = createSelector(getTogglingProfiles, getProfileId, (isTogglingArray, userId) => {\r\n    return isTogglingArray.some( (togglingId) => {return (togglingId === userId)} )\r\n})\r\n\r\nexport const getProfileFull = createSelector(getProfile, getFollowStatus, getMyId, (user, followStatus, myId) =>{\r\n\r\n    let isFollow = followStatus\r\n    if ((!user.userId || !myId) || (myId === user.userId))\r\n        isFollow = false;\r\n    return {...user, isFollow}\r\n})\r\n\r\n\r\n\r\n\r\nexport const getUserRating = createSelector(getProfile, (user) => {\r\n\r\n    if (! user.userId) return null\r\n    let filledParams = 1;\r\n    let totalParams = 1;\r\n\r\n    if (user.aboutMe) filledParams++;\r\n    totalParams++;\r\n\r\n    if (user.photos.large)\r\n        filledParams++;\r\n    totalParams++;\r\n\r\n    Object.keys(user.contacts).forEach((key) => {\r\n        if (user.contacts[key]) filledParams++;\r\n        totalParams++;\r\n    })\r\n\r\n    return Math.trunc(100 * filledParams / totalParams) ;\r\n\r\n})\r\n\r\n","import React from 'react';\nimport style from './Forms.module.css';\nimport {reduxForm} from \"redux-form\";\n\nconst FileUpload = (props) => {\n    return (\n        <>\n            {props.error}\n            <label htmlFor={\"file\"} className={style.fileUpload}>\n                <input type=\"file\" name=\"file\" id=\"file\" onChange={props.onUpload} multiple={!! props.multiple}/>\n                 {props.children}\n            </label>\n        </>\n    )\n}\n\nexport default reduxForm({form: 'upload_image'})(FileUpload);\n","import React, {useState, useEffect} from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Link from \"../../instruments/link/Link\";\r\n\r\nimport BadgeHeaderHOC from \"../Widjet/BadgeHeader\";\r\nimport BadgeSubHeader from \"../Widjet/BadjeSubHeader\";\r\n\r\nimport SinglePost from \"./SinglePost\";\r\nimport PostAddForm from \"../../forms/PostAddForm\";\r\nimport {reduxForm} from \"redux-form\";\r\n\r\nconst PostAddFormWall = reduxForm({form: \"wallMessage\"})(PostAddForm)\r\n\r\nconst Wall = ({posts, count, pageId, addPost, isOpen = false}) => {\r\n\r\n    let [isOpenTextBox, setTextBoxStatus] = useState(isOpen)\r\n\r\n    const handleShowTextBox = () =>  setTextBoxStatus(true)\r\n\r\n    const handleAddPost = (value) => {\r\n        addPost(pageId, value.text)\r\n        setTextBoxStatus(false)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <BadgeSubHeader count={count} name={(count === 1) ? \"post\" : \"posts\"} link={\"/wall\" + pageId} >\r\n                <Link onClick={handleShowTextBox} linkName={\"Write New Post\"} />\r\n            </BadgeSubHeader>\r\n            {isOpenTextBox &&\r\n                    <PostAddFormWall onSubmit={handleAddPost}/>\r\n            }\r\n            {\r\n                posts.map( (post) => {\r\n                    return <SinglePost key={post.postId} post={post} />\r\n                })\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nWall.propTypes = {\r\n    posts: PropTypes.array,\r\n    count: PropTypes.number,\r\n    isAuth: PropTypes.bool,\r\n    pageId: PropTypes.number,\r\n\r\n    addPost: PropTypes.func\r\n}\r\n\r\nexport  default BadgeHeaderHOC(Wall)","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userStatus\":\"UserStatus_userStatus__tuLty\",\"userStatus__lastUpdate\":\"UserStatus_userStatus__lastUpdate__3pUHQ\"};","import {createSelector} from \"reselect\"\r\n\r\nexport const getWallPosts = (state) => {\r\n    return state.wall.posts;\r\n}\r\n\r\nexport const getSomeWallPosts = createSelector(getWallPosts, (posts) => {\r\n\r\nreturn posts.slice(0, 10)\r\n\r\n})","module.exports = __webpack_public_path__ + \"static/media/menu.cde1b89d.JPG\";","module.exports = \"data:image/gif;base64,R0lGODlh4AGgAPMAANra2uPj49LS0szMzMDAwN7e3ubm5u7u7tzc3Le3t6qqqrGxsQAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQECgD/ACwAAAAA4AGgAAAE//DISau9OOvNu/9gKI5kaZ5oqq5s675wLM90bd94ru987//AoHBILBqPyKRyyWw6n9CodEqtWq/YrHbL7Xq/4LB4TC6bz+i0es1uu9/wuHxOr9vv+Lx+z+/7/4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAMKHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo0dKBrIMCAhg4CM3AwQEIAhgUhuAAQAkGCjQEpsBBBRI1rRWgOaEkDt5ljxgQGfQaiQD+DxaLeRQplCjSp1KtarVq1izat3KtavXr2DDih1LtqzZs2jTql3Ltq3bt3Djyp1Lt67du3jz6t3Lt6/fv4ADCx5MuLDhw4gTK17MuLHjx5AjS55MubLly5gza97MubPnz6BDix5NurTp06hTq17NurXr17Bjy55Nu7bt27hz697N21MEACH5BAUKAAcALOwATAAGAAUAAAMNeKqiI4IUUFQwYR2sEwAh+QQFCgAFACzsAEwACAAEAAADDnhnUO5HyGFqCAqQat5LACH5BAUKAAMALO4ATAAGAAUAAAQP8BQDjixoaKO7F4JlIUEEACH5BAUKAAYALO8ATAAFAAYAAAMMGFbWBc2NSJuIgYgEACH5BAUKAAUALO8ATAAFAAgAAAQT0JhwTgio1iCK98AnAsNHGJ90RAAh+QQFCgADACzvAEwABQAIAAAEFNDIQU04+JiST+EYYlAUgAhkgFIRACH5BAUKAAcALO4ATwAGAAUAAAMOeHphyyaoAgoRYijxTgIAIfkEBQoABQAs7ABQAAgABAAAAw5YutYE54TQzBD4LAVMTAAh+QQFCgADACzsAE8ABgAFAAAEDzCAQ48QI2ttNCoFBRhhBAAh+QQFCgAHACzsAE4ABQAGAAADDSgU19IwjhJBYKcYkwAAIfkEBQoABQAs7ABMAAQACAAAAw54ZlVGbYBGJxXh6GD0SgA7\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formError\":\"Forms_formError__2GCsO\",\"formLabel\":\"Forms_formLabel__17iSg\",\"loginInput\":\"Forms_loginInput__3eemh\",\"loginInput__profile\":\"Forms_loginInput__profile__2aanO\",\"formBlock\":\"Forms_formBlock__URM1_\",\"formBlock__inputs\":\"Forms_formBlock__inputs__2hI75\",\"formBlock__events_cancel\":\"Forms_formBlock__events_cancel__3kERQ\",\"loginButton\":\"Forms_loginButton__3TscP\",\"loginButton_left\":\"Forms_loginButton_left__2C3b0\",\"loginButton__unshifted\":\"Forms_loginButton__unshifted__3N5HH\",\"labeledCB\":\"Forms_labeledCB__3X_hy\",\"fileUpload\":\"Forms_fileUpload__FAlo1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageModal\":\"ModalPhoto_imageModal__3ejYO\",\"imageModal__body\":\"ModalPhoto_imageModal__body__10_9l\",\"imageModal_imgContainer\":\"ModalPhoto_imageModal_imgContainer__2XOTr\",\"imageModal_imgContainer__cell\":\"ModalPhoto_imageModal_imgContainer__cell__nqimn\",\"imageModal_navigation\":\"ModalPhoto_imageModal_navigation__otHRh\",\"imageModal_menu__left\":\"ModalPhoto_imageModal_menu__left__1gXQu\",\"imageModal_menu__center\":\"ModalPhoto_imageModal_menu__center__29ibg\",\"imageModal_menu__right\":\"ModalPhoto_imageModal_menu__right__1vs-d\",\"imageModal_menu\":\"ModalPhoto_imageModal_menu__3OgMI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pageHeader\":\"Header_pageHeader__3Udyi\",\"pageHeader__border\":\"Header_pageHeader__border__I3SCx\",\"home\":\"Header_home__7l_p7\",\"menuHidden\":\"Header_menuHidden__2oUvy\",\"home__logo\":\"Header_home__logo__1xbfD\",\"searchBar\":\"Header_searchBar__3Wm36\",\"menuBar\":\"Header_menuBar__3oi9C\",\"menuBar__item\":\"Header_menuBar__item__Lo7WW\"};","import React from \"react\";\n\nimport s from  './ElementNameHeader.module.css'\n\nconst ElementNameHeader = (props) => {\n    return (<div className={s.profileBorder}>\n        <div className={s.profileHeader}>{props.text}</div>\n        <div className={s.profileBorder__subBorder}>\n            {props.children}\n        </div>\n    </div>)\n}\n\nexport default ElementNameHeader;","import React from 'react';\r\nimport styled from \"styled-components\"\r\n\r\n\r\nexport const DateText = styled.span`\r\n    color:grey\r\n`\r\n\r\nexport const ListContainerSection = styled.section`\r\n    padding: 5px 10px;\r\n`\r\n\r\nexport const SinglePostBody = styled.div`\r\n    display: grid;\r\n    grid-template-columns: ${p => p.imgWidth}px 1fr;\r\n    grid-gap: 5px;\r\n    padding: 10px 5px;\r\n`;\r\n\r\nexport const escapedNewLineToLineBreakTag = (string) => {\r\n    if (string === undefined) return '';\r\n    return string.split('\\n').map((item, index) => {\r\n        return (index === 0) ? item : [<br key={index} />, item]\r\n    })\r\n}","import {getAuthRequest} from \"./auth-reducer\";\n\nlet initialState = {\n    initialize: false\n}\n\nconst SET_INITIALIZE = 'social-network/init/SET_INITIALIZE'\n\nexport let initReducer = (state = initialState, action) => {\n\n    switch (action.type) {\n        case SET_INITIALIZE:\n            return {...state, initialize: true}\n        default:\n            return state;\n    }\n}\n\nlet setInitSuccess = () => { return {type: SET_INITIALIZE} }\n\n//инициализируем приложение, запрашиваем на сервере статус авторизации\nexport const initApp = () => (dispatch) => {\n    dispatch(getAuthRequest()).then( () => {\n        dispatch(setInitSuccess())\n}).catch ( () => alert(\"Sever is not available now :(\"))\n\n}\n\n","import React from 'react';\nimport menu from './Header.module.css'\nimport {NavLink} from \"react-router-dom\";\n\n\nconst MainMenu = (props) => {\n    let menuItems = [\n                     {name: 'events', path: '/events'}, {name: 'communities', path: '/communities'}, {name: 'users', path: '/users'} ];\n    let handleLogout = () => {\n        props.logout()\n    }\n    //для авторизованного пользователя выводим logout для неавторизованного login\n    return (\n        <ul className={menu.menuBar} >\n            {props.isAuth ? <li className={menu.menuBar__item} key='logout' ><span onClick={handleLogout}>logout</span></li> :\n                <li className={menu.menuBar__item} key='login'><NavLink to='/login'>login</NavLink> </li>}\n            { menuItems.map( (item) => {\n                return( <li className={menu.menuBar__item} key={item.name}><NavLink to={item.path}>{item.name}</NavLink></li> )\n            }) }\n        </ul>\n    )\n}\n\nexport default MainMenu;","import React from 'react';\nimport style from './SearchBar.module.css';\n\nconst SearchBar = () => {\n    return (\n        <form className={style.searchBar} method=\"get\">\n            <input className={style.searchBar__text}  placeholder=\"Search\" />\n        </form>\n    )\n}\n\nexport default SearchBar;","import {dialogAPI} from \"../../oosocial-api/api\";\nimport {Arrays} from \"../../utils/array\";\n\nlet initialState = {\n    alerts: [ {name: 'Friends', count: 0 }, {name: 'Photos', count: 0},\n        {name: 'Wall', count: 0 }, {name: 'Messages', count: 0}, {name: 'Notes', count: 0},\n        {name: 'Groups',  count: 0 }\n    ]}\n\nconst SET_MESSAGES_COUNT = 'social-network/alerts/SET_MESSAGES_COUNT'\n\nexport let requestsReducer = (state = initialState, action) => {\n\n    switch (action.type) {\n        case SET_MESSAGES_COUNT:\n        return {...state,\n            alerts: Arrays.findOneAndUpdate(state.alerts, \"name\", \"Messages\", {count: action.messagesCount})}\n        default: return state;\n    }\n\n}\n\nconst setUnreadMessages = (messagesCount) => {\n    return {type: SET_MESSAGES_COUNT, messagesCount}\n}\n\nexport const updateAlerts = () => async (dispatch) =>{\n    let response = await dialogAPI.getMessagesUnread()\n    if (response.data.resultCode === 0) {\n        dispatch(setUnreadMessages(response.data.messagesCount))\n    }\n}","import React from 'react';\nimport {NavLink} from \"react-router-dom\";\n\nimport s from  './SideBar.module.css'\n\nconst SideBarItemWithAlert = (props) => {\n    let ret = (props.item.count > 0) ?\n        <span style={{flexDirection: 'row'}}> (\n            <span style={{fontWeight: 'bold'}}>{props.item.count}</span>)</span> : '';\n\n    return <li className={s.sideBar__navLi}><NavLink\n        to={\"/\" + props.item.name.toLowerCase()}> {'My ' + props.item.name}{ret}</NavLink>\n    </li>\n}\n\nconst SideBar = (props) => {\n    let ownerId = props.myId ? \"/id\" + props.myId : \"\";\n    return (\n        <ol className={s.sideBar__nav }>\n            <li className={s.sideBar__profileLi}>\n                <NavLink to={ownerId} className={s.sideBar__nav__profile}> My Profile </NavLink>\n                <NavLink to='/edit' className={s.sideBar__nav__profile_edit}> ed. </NavLink>\n            </li>\n\n            { props.alerts.map( (item) => { return <SideBarItemWithAlert item={item}  key={item.name}/> } ) }\n            <li className={s.sideBar__navLi}><NavLink to='/settings'>My Settings</NavLink>\n            </li>\n        </ol>\n    )\n}\n\nexport default SideBar;","import React from 'react';\nimport {connect} from \"react-redux\";\n\nimport {updateAlerts} from \"../../redux/reducers/requests-reducer\";\n\nimport SideBar from \"./SideBar\";\n\nconst AlertsContainer = ({updateAlerts, isFetching, ...props}) => {\n\n    React.useEffect( () => {\n        if (!isFetching)\n            updateAlerts()\n    }, [isFetching])\n\n    return <SideBar {...props} />\n}\n\n\nlet mapStateToProps = (state) => {\n    return {\n        alerts: state.requests.alerts,\n        myId: state.auth.myId,\n\n        isFetching: state.dialog.isFetching,\n    }\n}\n\nexport default connect(mapStateToProps, {updateAlerts})(AlertsContainer)","import React, {useState} from 'react';\n\nimport style from './Header.module.css';\n\nimport menuImage from \"../../media/menu.JPG\"\n\nimport styled from 'styled-components'\nimport AlertsContainer from \"../sidebar/AlertsContainer\";\n\nconst MenuHiddenBody = styled.div`\n    position: fixed;\n    top: 45px;\n    background: transparent;\n    width: 100%;\n    height: 100%;\n    z-index: 10;\n`\n\nconst MenuHiddenBlock = styled.div`\n     position: fixed;\n     background: white;\n     display: block;\n     padding: 5px;\n     top: 46px;\n     left: 5px;\n     width: 118px;\n     box-shadow: 5px 5px 5px -2px rgba(0, 0, 0, .2);\n`\n\nconst MenuHidden = () => {\n    let [isMenuShow, setMenuShow] = useState(false)\n\n    const handleHideMenuClick = () => {\n        setMenuShow(false)\n    }\n\n    const handleToggleMenuClick = () => {\n        setMenuShow(!isMenuShow)\n    }\n\n    return (\n        <>\n            <div className={style.menuHidden}>\n                <img src={menuImage} width={\"21px\"} onMouseUp={handleToggleMenuClick} />\n            </div>\n            {isMenuShow &&\n            <MenuHiddenBody onClick={handleHideMenuClick} >\n                <MenuHiddenBlock >\n                    <AlertsContainer/>\n                </MenuHiddenBlock>\n            </MenuHiddenBody>}\n        </>\n    )\n}\n\nexport default MenuHidden","import React, {useState} from 'react';\nimport {NavLink} from \"react-router-dom\";\nimport {connect} from \"react-redux\";\nimport {logout} from \"../../redux/reducers/auth-reducer\";\n\nimport style from './Header.module.css';\n\nimport MainMenu from \"./MainMenu\";\nimport SearchBar from \"../forms/searchbar-form/SearcBar\";\nimport MenuHidden from \"./HeaderMobileMenu\";\n\nconst Header = ({isAuth, login, logout}) => {\n    return (\n        <div className={style.pageHeader}>\n            <div className={style.pageHeader__border}>\n                <MenuHidden/>\n                <h1 className={style.home}>\n                    {isAuth && <NavLink className={style.home__logo} to='/'> {login} </NavLink>}\n                </h1>\n                <div className={style.searchBar}>\n                    <SearchBar/>\n                </div>\n                <MainMenu isAuth={isAuth} logout={logout}/>\n            </div>\n        </div>\n    )\n}\n\nlet mapStateToProps = (state) => {\n    return {\n        isAuth: state.auth.isAuth,\n        login: state.auth.login\n    }\n}\n\n\nexport default connect (mapStateToProps, {logout}) (Header);","import React, {useEffect} from 'react';\r\n\r\nimport {connect} from \"react-redux\";\r\nimport ElementNameHeader from \"../profile/element-name-header/ElementNameHeader\";\r\n\r\nconst Notes = (props) => {\r\n    return (\r\n        <ElementNameHeader text={'my notes'}>\r\n\r\n        </ElementNameHeader>\r\n    )\r\n}\r\n\r\nconst NotesContainer = (props) => {\r\n\r\n    //props.getProfileL()\r\n    useEffect(() => {handleNotes()}, [])\r\n\r\n    const handleNotes = () => {\r\n\r\n    }\r\n    return <Notes />\r\n}\r\n\r\nexport default connect(\"\", {}) (NotesContainer)","import React from 'react';\n\nimport s from  '../Forms.module.css'\n\n//свой labeled checkbox, reverse регулирует появление подписи после или перед боксом\nconst CheckBox = ({meta, input, label, reverse, ...props}) => {\n    const labelText =  (!! label) ? label : \"\"\n    return (\n        <div className={ s.labeledCB}>\n            { reverse && <label htmlFor=\"rememberMe\">{labelText}</label>}\n            <input {...input} {...props} type=\"checkbox\" />\n            { (!reverse) && <label htmlFor=\"rememberMe\">{labelText}</label>}\n        </div>\n    )}\nexport default CheckBox","import React from 'react';\n\nimport s from  './Forms.module.css'\n\nimport {Field, reduxForm} from 'redux-form'\nimport {minLength, required} from \"./forms-validators\";\n\nimport TextBox from \"./inputs-validate/TextBox\";\nimport Button from \"../instruments/buttons/Button\";\nimport CheckBox from \"./inputs-validate/CheckBox\";\nimport {NavLink} from \"react-router-dom\";\n\n\nconst minLength4 = minLength(4);\n\nconst LoginForm = (props) => {\n    return (\n        <form onSubmit={props.handleSubmit} className={s.formBlock__inputs}>\n            {props.error && <div className={s.formError}> {props.error} </div>}\n            <div className={s.loginInput}>\n                <Field name=\"email\" placeholder=\"Email\" label=\"Email:\" component={TextBox} validate={[required]}/>\n            </div>\n            <div className={s.loginInput}>\n                <Field name=\"password\" placeholder=\"Your password\" label=\"Password:\" component={TextBox} type=\"password\"\n                       validate={[required, minLength4]}/>\n            </div>\n            <div>\n                <Field name=\"rememberMe\" component={CheckBox} label='Remember me' reverse={true}/>\n                <div className={s.loginButton + \" \" + s.loginButton_left}>\n                <NavLink to={\"/registration\"}><Button type=\"button\" disabled={props.submit}>Register</Button></NavLink>\n                </div>\n                <div className={s.loginButton}>\n                    <Button type=\"submit\" disabled={props.submit}>Login</Button>\n                </div>\n            </div>\n        </form>\n    )\n}\n//даём уникальное имя форме логинизации и оборачиваем ХОКом\nexport default reduxForm({form: 'login'})(LoginForm)\n","import React from \"react\";\nimport {connect} from \"react-redux\";\n\nimport {login} from \"../../redux/reducers/auth-reducer\";\nimport {getUsers} from \"../../redux/reducers/users-reducer\";\n\nimport ElementNameHeader from \"../profile/element-name-header/ElementNameHeader\";\nimport LoginForm from \"../forms/LoginForm\";\nimport Link from \"../instruments/link/Link\";\n\nimport s from \"../forms/Forms.module.css\";\nimport LoginWelcome, {LoginWelcomeText} from \"./LoginWelcome\";\n\n\nconst Login = (props) => {\n\n    if (props.isAuth && props.previousLocation && (props.previousLocation !== \"/login\"))\n        props.history.push(props.previousLocation)\n\n\n    const formSubmit = (value) => {\n        props.login(value.email, value.password, value.rememberMe)\n    }\n    return (\n        <ElementNameHeader text='login'>\n            <div className={s.formBlock}>\n                {(props.isAuth) ?\n                    <LoginWelcomeText>You have an account and you need to logout first</LoginWelcomeText> :\n                    <>\n                        {props.children}\n                        <LoginForm onSubmit={formSubmit}/>\n                        <LoginWelcomeText>If you haven't an account, please <Link to='/registration' linkName='register' /></LoginWelcomeText>\n                    </>\n                }\n            </div>\n\n        </ElementNameHeader>\n    )\n}\n\n\nconst LoginContainer = ({isFetching, totalCount, getUsers, ...props} ) => {\n\n    React.useEffect( () => {\n        let countUpd\n        if (! props.isAuth)\n            countUpd = setInterval( () => {\n                if (! isFetching)\n                    getUsers(1)\n            }, 2000)\n        else\n            clearInterval(countUpd)\n        return () => clearInterval(countUpd)\n    }, [props.isAuth, getUsers])\n\n    return <Login {...props}> <LoginWelcome count={totalCount + 1}/></Login>\n\n}\n\nlet mapStateToProps = (state) => {\n    return {\n        isAuth: state.auth.isAuth,\n        login: state.auth.login,\n        previousLocation: state.auth.previousLocation,\n\n        totalCount: state.users.totalCount,\n        isFetching: state.users.isFetching,\n    }\n}\n\n\nexport default connect (mapStateToProps, {login, getUsers}) (LoginContainer);","import React from \"react\";\nimport {Redirect} from \"react-router-dom\";\n\n\nconst LoginRedirectTo = ({conditionU, path, orPath}) => {\n\n    return  (\n        <>\n            { conditionU ?\n                <>\n                    { path &&  <Redirect to={path} /> }\n                </>\n                : <Redirect  to={orPath || '/login'} /> }\n        </>\n    )\n}\n\n\n\nexport default LoginRedirectTo;","import React from 'react';\r\n\r\nimport style from './Photos.module.css';\r\n\r\nimport FileUpload from \"../forms/FileUpload\";\r\nimport Button from \"../instruments/buttons/Button\";\r\nimport Link from \"../instruments/link/Link\";\r\n\r\n\r\nconst UploadPhotosPanel = ({fullName, userId, currentUploading, startUpload}) => {\r\n    const [totalUpload, setTotalUpload] = React.useState(0)\r\n\r\n    const handleFilesUpload = (event) => {\r\n        if (event.target.files.length) {\r\n            setTotalUpload(event.target.files.length)\r\n            startUpload(event.target.files);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={style.imagesControl}>\r\n            <div className={style.imagesControl__navigation}>\r\n                <Link to={\"/id\" + userId} linkName={fullName}/><b>{\" >> \"}</b>photos\r\n            </div>\r\n\r\n            {currentUploading ? <h2>...uploading&nbsp;{currentUploading}&nbsp;of&nbsp;{totalUpload}</h2> :\r\n\r\n                <div className={style.imagesControl__upload}>\r\n                    <Button isNonButton={true}>\r\n                        <FileUpload onUpload={handleFilesUpload} multiple={true}>Upload new photos</FileUpload>\r\n                    </Button>\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default UploadPhotosPanel;","import React, {useEffect} from 'react';\r\n\r\nimport style from './ModalPhoto.module.css';\r\n\r\nimport Link from \"../../instruments/link/Link\";\r\n\r\nconst ModalPhotoView = ({showSinglePhoto, children, indexImg, imgCount, path}) => {\r\n\r\n    return (\r\n    <div className={style.imageModal} onClick={showSinglePhoto.bind(null, null)} >\r\n\r\n\r\n\r\n        <div className={style.imageModal__body} onClick={(e) => e.stopPropagation()}>\r\n            <div className={style.imageModal_navigation}>\r\n                <div className={style.imageModal_menu__left}>\r\n                    <Link isDisabled={indexImg < 2} onClick={showSinglePhoto.bind(null, indexImg - 1)}\r\n                          linkName={\"<< Previous  \"}/>\r\n                </div>\r\n                <div className={style.imageModal_menu__center}>\r\n                    <Link  onClick={showSinglePhoto.bind(null, null)} linkName={\"Close\"}/>\r\n                </div>\r\n                <div className={style.imageModal_menu__right}>\r\n                    <Link isDisabled={indexImg === imgCount} onClick={showSinglePhoto.bind(null, indexImg + 1)} linkName={\"Next >>\"}/>\r\n                </div>\r\n            </div>\r\n\r\n            <div className={style.imageModal_imgContainer}>\r\n                <div className={style.imageModal_imgContainer__cell}>\r\n                    <img src={path}  />\r\n                </div>\r\n            </div>\r\n\r\n            {children}\r\n\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\n\r\nexport default ModalPhotoView;","import React, {useEffect, useState} from 'react';\r\n\r\nimport style from './ModalPhoto.module.css';\r\n\r\nimport {dateParse} from '../../../utils/date'\r\n\r\nimport Link from \"../../instruments/link/Link\";\r\n\r\n\r\nconst ModalPhotoViewMenu = ({isOwner, image, setAsProfile, isDisabled, deletePhoto, setDescriptionReq}) => {\r\n    //#region of change photo description methods\r\n    let [isDescriptionEdit, setDescriptionEdit] = useState(false)\r\n    let [imgDescription, setImgDescription] = useState( image.description)\r\n\r\n    useEffect(() => {\r\n        setImgDescription(image.description)\r\n    }, [image.description])\r\n\r\n    const handleEditImageDescription = (e) => {\r\n        console.log(e.target.value)\r\n        setImgDescription(e.target.value)\r\n        console.log(\"setImgDescription:  \" + imgDescription)\r\n    }\r\n\r\n    const sendDescription = () => {\r\n        console.log(\"send \" + imgDescription)\r\n        setDescriptionReq(image.id, imgDescription )\r\n        setDescriptionEdit(false)\r\n    }\r\n    //#endregion\r\n\r\n    const date = dateParse.toNumbers(image.date)\r\n\r\n    const setImageHandle = () => {\r\n        setAsProfile(image.id)\r\n    }\r\n\r\n    const deleteImageHandle = () => {\r\n        deletePhoto(image.id)\r\n    }\r\n\r\n    return (\r\n            <div className={style.imageModal_menu}>\r\n\r\n                {isOwner ?\r\n                    <ul className={style.imageModal_menu__left}>\r\n                        <li key={\"ci\"}><Link isDisabled={isDisabled} onClick={()=> {setDescriptionEdit(true)} } linkName={\"Change image description\"}/></li>\r\n                        <li  key={\"si\"}><Link isDisabled={isDisabled} onClick={setImageHandle} linkName={\"Set as profile image\"}/></li>\r\n                        <li  key={\"di\"}><Link isDisabled={isDisabled} onClick={deleteImageHandle} linkName={\"Delete this image\"}/></li>\r\n                    </ul> :\r\n                    <div></div>}\r\n\r\n                <div className={style.imageModal_menu__left + \" \" + style.imageModal_menu__right}>\r\n\r\n                        <li key={\"Description edit\"}>\r\n                            {isDescriptionEdit ?\r\n                                <input autoFocus placeholder=\"Add description\" value={imgDescription}\r\n                                       onChange={handleEditImageDescription}\r\n                                       onBlur={sendDescription}/> :\r\n                                <span>{image.description}</span>\r\n                            }\r\n                        </li>\r\n\r\n\r\n                    <li key={\"Photo date\"}>Uploaded {date}</li>\r\n                    <li key={\"full version\"}><Link isExternal={true} to={image.path} linkName=\"Watch full image version\" /></li>\r\n\r\n                </div>\r\n            </div>\r\n\r\n    )\r\n}\r\n\r\n\r\nexport default ModalPhotoViewMenu;","import React from 'react';\r\n\r\nimport style from './Photos.module.css';\r\n\r\nimport ElementNameHeader from \"../profile/element-name-header/ElementNameHeader\";\r\nimport UploadPhotosPanel from \"./UploadPhotosPanel\";\r\nimport ModalPhotoView from \"./modal-photo-view/ModalPhotoView\";\r\nimport ModalPhotoViewMenu from \"./modal-photo-view/ModalPhotoViewMenu\";\r\n\r\n\r\nconst Photos = (props) => {\r\n\r\n    const [indexImgModal, setImgModal] = React.useState(false)\r\n\r\n    const showSinglePhoto = (index) => {\r\n        if (index > props.photos.length)\r\n            setImgModal(1)\r\n        else setImgModal(index)\r\n    }\r\n\r\n    const getPhoto = () =>\r\n    {\r\n        let index  = indexImgModal\r\n        if (index < 1)\r\n            index = 1;\r\n        if (index > props.photos.length)\r\n            index = props.photos.length\r\n        return props.photos[index - 1]\r\n    }\r\n\r\n    return (\r\n        <ElementNameHeader text={`id${props.userId} photos, total: ${props.totalCount}`}>\r\n\r\n            {props.isOwner &&\r\n                <UploadPhotosPanel userId={props.userId} fullName={props.fullName} currentUploading={props.currentUploading} startUpload={props.uploadPhotosRequest}/>\r\n            }\r\n            <div className={style.imagesPanel}>\r\n                {\r\n                    props.photos.map((photo, index) => {\r\n                        return <div className={style.image__preview} key={photo.id} onClick={showSinglePhoto.bind(null, index + 1)}>\r\n\r\n                            <img key={photo.id} src={photo.preview} alt={`id ${props.userId} photo ${(index + 1)}`}/>\r\n                        </div>\r\n                    })\r\n                }\r\n            </div>\r\n            {indexImgModal && (!!props.photos.length) &&\r\n            <ModalPhotoView imgCount={props.photos.length}  path={getPhoto().path}\r\n                            showSinglePhoto={showSinglePhoto} indexImg={indexImgModal} >\r\n\r\n                <ModalPhotoViewMenu image={getPhoto()} isOwner={props.isOwner} deletePhoto={props.deletePhoto}\r\n                                    setAsProfile={props.setImageAsProfilePhoto} isDisabled={props.isProfilePhotoSet}\r\n                                    setDescriptionReq={props.updateImageDescription}/>\r\n\r\n            </ModalPhotoView>\r\n            }\r\n        </ElementNameHeader>\r\n    )\r\n}\r\nexport default Photos","import React, {useEffect} from 'react';\r\n\r\nimport {connect} from \"react-redux\";\r\nimport {compose} from \"redux\";\r\nimport {withRouter} from \"react-router-dom\";\r\n\r\nimport {\r\n    getPhotosRequest,\r\n    uploadPhotosRequest,\r\n    setImageAsProfilePhoto,\r\n    deletePhoto, updateImageDescription\r\n} from \"../../redux/reducers/images-reducer\";\r\nimport {getProfileRequest} from \"../../redux/reducers/profile-reducer\";\r\n\r\nimport {getPhotosCount, getSortedImages} from \"../../redux/selectors/photos-selector\";\r\nimport {getProfileFullName} from \"../../redux/selectors/profile-selector\";\r\n\r\nimport Photos from \"./Photos\";\r\n\r\nconst PhotosContainer = ({myId, getPhotosRequest, getProfileRequest, isAuth, ...props}) => {\r\n\r\n    useEffect(() => {handlePhotos()}, [props.match.params.userId])\r\n\r\n    const userId = props.match.params.userId ? props.match.params.userId : myId;\r\n\r\n    const handlePhotos = () => {\r\n        getProfileRequest(userId);\r\n        getPhotosRequest(userId);\r\n    }\r\n\r\n    return <Photos {...props} userId={userId} isOwner={isAuth && (parseInt(userId) === parseInt(myId))} />\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        photos: getSortedImages(state),\r\n        totalCount: getPhotosCount(state),\r\n        myId: state.auth.myId,\r\n        isAuth: state.auth.isAuth,\r\n        currentUploading: state.photos.currentUploading,\r\n        isProfilePhotoSet: state.photos.isProfilePhotoSet,\r\n\r\n        fullName: getProfileFullName(state)\r\n    }\r\n}\r\n\r\nexport default compose(withRouter, connect(mapStateToProps, {\r\n    getPhotosRequest,\r\n    getProfileRequest,\r\n    uploadPhotosRequest,\r\n    setImageAsProfilePhoto,\r\n    deletePhoto,\r\n    updateImageDescription\r\n}))(PhotosContainer)","import React from 'react';\r\n\r\n\r\nimport styled from 'styled-components'\r\nimport Link from \"../instruments/link/Link\";\r\n\r\n\r\nconst PageFooter = styled.div`\r\n    grid-area: f;\r\n    text-align: center;\r\n    padding: 20px 10px;\r\n    height: auto;\r\n    display: table-cell;\r\n    vertical-align: bottom;\r\n    \r\n    @media (max-width: 375px) {\r\n        display: none;\r\n    }\r\n`;\r\n\r\n\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <PageFooter>\r\n            <Link to={\"https://github.com/evgeneh\" } isExternal={true} linkName={\"@evgeneh\"} />\r\n            <small> 2019 </small>\r\n        </PageFooter>\r\n    )\r\n}\r\n\r\nexport  default Footer","import React, {useEffect} from 'react';\r\n\r\nimport {connect} from \"react-redux\";\r\nimport {compose} from \"redux\";\r\nimport {withRouter} from \"react-router-dom\";\r\n\r\nimport {ListContainerSection} from \"../../instruments/styles/Styles\";\r\n\r\nimport Wall from \"./Wall\";\r\nimport {getWallPosts} from \"../../../redux/selectors/wall-selector\";\r\nimport {AddNewPostRequest, getWallRequest} from \"../../../redux/reducers/wall-reducer\";\r\nimport ElementNameHeader from \"../element-name-header/ElementNameHeader\";\r\n\r\nconst WallContainer = ({match, myId, ...props}) => {\r\n\r\n    const userId = match.params.userId ? match.params.userId : myId;\r\n\r\n    const handleWall = () => {\r\n        props.getWallRequest(userId)\r\n    }\r\n\r\n    useEffect(() => {\r\n        handleWall()\r\n    }, [match.params.userId, parseInt(userId)] )\r\n\r\n    return (<ElementNameHeader text={'id' + userId + ' wall'}>\r\n        <ListContainerSection>\r\n            <Wall text={\"Wall\"} isAuth={props.isAuth} pageId={userId}\r\n                  posts={props.posts} count={props.postsCount}\r\n                  addPost={props.AddNewPostRequest} isOpen={true}/>\r\n        </ListContainerSection>\r\n    </ElementNameHeader>)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        //wall state\r\n        posts: getWallPosts(state),\r\n        postsCount: state.wall.totalCount,\r\n\r\n        isAuth: state.auth.isAuth,\r\n        myId: state.auth.myId\r\n    }\r\n}\r\n\r\nexport default compose(withRouter, connect(mapStateToProps, {\r\n    AddNewPostRequest,\r\n    getWallRequest\r\n}))(WallContainer)","import React from 'react';\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport styled from \"styled-components\";\r\n\r\nimport {dateParse} from \"../../../utils/date\";\r\nimport { escapedNewLineToLineBreakTag} from \"../../instruments/styles/Styles\";\r\n\r\nconst DialogMessage = styled.li`\r\n    display: flex;\r\n    padding: 5px 0;\r\n    width 100%;\r\n    text-align: ${ p => p.myPost ? 'right' : 'left'};   \r\n    \r\n    font-size: 12px; \r\n    \r\n    justify-content: ${ p => p.myPost ? 'right' : 'left'};    \r\n    -webkit-justify-content: ${ p => p.myPost ? 'flex-end' : 'flex-start'};  \r\n    small {\r\n        color: grey;\r\n    }\r\n    \r\n`;\r\n\r\nconst MessageCut = styled.div`\r\n        word-break: break-word;\r\n        padding: 3px 7px;\r\n        border-radius: 3px;\r\n        background: white;   \r\n        max-width:80%;               \r\n    \r\n`\r\n\r\nconst RoundUnread = styled.div`\r\nbackground: #32608A;\r\nmargin-top: 8px;\r\nmargin-right: -10px;\r\nmargin-left: 4px;\r\nwidth: 6px;\r\nheight: 6px;\r\nborder-radius: 3px;\r\n`\r\n\r\n\r\nconst DialogSingleMessage = ({isMyPost, isRead, text, date}) => {\r\n    return (\r\n        <DialogMessage myPost={isMyPost}>\r\n            <MessageCut isRead={isRead}>\r\n                {escapedNewLineToLineBreakTag(text)}\r\n                <br/> <small>{dateParse.toTimeString(date)}</small>\r\n            </MessageCut>\r\n            {(isMyPost && (!isRead)) && <RoundUnread />}\r\n        </DialogMessage>\r\n    )\r\n}\r\n\r\nDialogSingleMessage.propTypes = {\r\n    isMyPost: PropTypes.bool,\r\n    isRead: PropTypes.bool,\r\n    text: PropTypes.string,\r\n    date: PropTypes.string\r\n}\r\n\r\n\r\n\r\nexport default DialogSingleMessage","import React, {useEffect, useRef} from 'react';\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport styled from \"styled-components\";\r\n\r\nimport {reduxForm} from \"redux-form\";\r\n\r\nimport {dateCompare, dateParse} from \"../../../utils/date\";\r\nimport {DateText} from \"../../instruments/styles/Styles\";\r\nimport PostAddForm from \"../../forms/PostAddForm\";\r\n\r\nimport DialogSingleMessage from \"./DialogSingleMessage\";\r\n\r\nconst Parent = styled.div`\r\n    height: 80vh;\r\n    display: grid;    \r\n    padding: 10px;\r\n    grid-template-rows: 1fr auto 100px;\r\n    section {\r\n        background: #DAE1E8;   \r\n    }\r\n    @media (max-width: 375px) {\r\n      grid-template-rows: 1fr auto 70px;\r\n      z-index: 5;  \r\n      position: absolute;\r\n      top: 70px;\r\n      left: 0;\r\n      right: 0;\r\n      height: calc(95% - 70px);\r\n    }\r\n`\r\n\r\nconst DialogBox = styled.div`    \r\n    overflow-y: auto;\r\n`\r\n\r\nconst DialogsList = styled.ol`\r\n    list-style: none;    \r\n    margin: 0;\r\n    width: 1fr;\r\n    padding: 10px 20px;\r\n    background:  #DAE1E8;\r\n    \r\n`;\r\n\r\n\r\nconst DialogData = styled.li`\r\n    display: flex;\r\n    padding-top: 5px;\r\n    align-items: center;\r\n    justify-content: center;\r\n`;\r\n\r\nconst MessageCreation = styled.div`\r\n     background: white;`\r\n\r\n\r\nconst PostAddFormDialog = reduxForm({form: \"dialogMessage\"})(PostAddForm)\r\n\r\n\r\nconst Dialog = ({messages, owner, totalMessagesCount, myId, sendMessage}) => {\r\n\r\n    let datePrev = new Date(0)\r\n\r\n    const messagesEndRef = useRef(null)\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current.scrollIntoView({behaviour: \"smooth\"})\r\n    }\r\n\r\n    useEffect( scrollToBottom, [messages])\r\n\r\n\r\n    const handleSendMessage = (value) => {\r\n\r\n        sendMessage(value.text, owner.userId)\r\n    }\r\n\r\n    let reverseMessages = [...messages].reverse()\r\n    return (\r\n        <Parent>\r\n            <section className=\"void\"></section>\r\n            <DialogBox>\r\n                <DialogsList>\r\n                    {\r\n                        reverseMessages.map((message) => {\r\n\r\n                            const isMyPost = (message.ownerId === myId)\r\n\r\n                            let date = new Date(message.date)\r\n                            let isNewDay = ! dateCompare.isSameDay(datePrev,date)\r\n                            datePrev = date\r\n                            //\r\n                            return <React.Fragment  key={message.date}>\r\n                            { isNewDay &&\r\n                                 <DialogData>\r\n                                     <DateText> {dateParse.toDayAndMonth(date)} </DateText>\r\n                                </DialogData>\r\n                            }\r\n\r\n                                <DialogSingleMessage date={date} isMyPost={isMyPost}\r\n                                                     isRead={message.isRead} text={message.text}/>\r\n\r\n                             </React.Fragment>\r\n                        })\r\n\r\n                    }\r\n                </DialogsList>\r\n                <div ref={messagesEndRef} />\r\n            </DialogBox>\r\n            <MessageCreation>\r\n                <PostAddFormDialog onSubmit={handleSendMessage} />\r\n            </MessageCreation>\r\n        </Parent>\r\n    )\r\n}\r\n\r\nDialog.propTypes = {\r\n    messages: PropTypes.array,\r\n    owner: PropTypes.object,\r\n\r\n    totalMessagesCount: PropTypes.number,\r\n    myId: PropTypes.number,\r\n\r\n    sendMessage: PropTypes.func\r\n}\r\n\r\nexport default Dialog","import {reset} from 'redux-form';\r\nimport {dialogAPI} from \"../../oosocial-api/api\";\r\n\r\nconst initialState={\r\n    currentDialogId: null,\r\n    owner: {userId: 2, photo: \"https://s5o.ru/storage/simple/ru/edt/82/57/c6/1b/ruef2b9f9c218.jpg\", fullName: \"Eldar Sh\"},\r\n    messages: [\r\n\r\n        { date: \"2020-02-10T22:06:18.762Z\", text: \"Hi.\", ownerId: 1 },\r\n        { date: \"2020-02-10T22:06:17.762Z\", text: \"Hello, my friend\\n:)\",ownerId: 2  },\r\n        { date: \"2020-02-01T22:06:17.762Z\", text: \"Hello, my friend111111111111111111111111111111111 eeee\\r\\n:)\", ownerId: 1  }\r\n\r\n    ],\r\n    totalMessagesCount: 14,\r\n    isFetching: false,\r\n    isMessaging: false,\r\n\r\n    dialogsTotalCount: 0,\r\n    dialogs: []\r\n}\r\n\r\nconst SET_DIALOGS = 'social-network/dialogs/SET_DIALOGS'\r\n\r\nconst ADD_NEW_MESSAGE = 'social-network/dialogs/ADD_NEW_MESSAGE'\r\n\r\nconst TOGGLE_FETCHING_UPDATE = 'social-network/dialogs/TOGGLE_FETCHING_UPDATE'\r\n\r\nconst TOGGLE_FETCHING_MESSAGING = 'social-network/dialogs/TOGGLE_FETCHING_UPDATE'\r\n\r\nconst SET_DIALOGS_LIST = 'social-network/dialogs/SET_DIALOGS_LIST'\r\n\r\n\r\nexport const dialogsReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n\r\n        case SET_DIALOGS:\r\n            return {...state, messages: [...action.messages], totalMessagesCount: action.count, currentDialogId: action.dialogId, owner: {...action.owner}}\r\n\r\n        case ADD_NEW_MESSAGE:\r\n            return {...state, messages: [action.message, ...state.messages], totalMessagesCount: state.totalMessagesCount + 1}\r\n        case TOGGLE_FETCHING_UPDATE:\r\n            return {...state, isFetching: action.isFetching}\r\n        case TOGGLE_FETCHING_MESSAGING:\r\n            return {...state, isMessaging: action.isFetching}\r\n        case SET_DIALOGS_LIST:\r\n            return {...state, dialogs: [...action.dialogs], dialogsTotalCount: action.dialogsTotalCount}\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nconst setMessages = (messages, owner, dialogId, count) => {return {type: SET_DIALOGS, messages, owner, dialogId, count}}\r\n\r\nexport const addNewMessage = message =>{ return {type: ADD_NEW_MESSAGE, message}}\r\n\r\nconst toggleFetching = isFetching => { return {type: TOGGLE_FETCHING_UPDATE, isFetching}}\r\n\r\nconst toggleMessaging = isFetching => { return {type: TOGGLE_FETCHING_MESSAGING, isFetching}}\r\n\r\nexport const AddNewMessageRequest = (messageText, id) => async (dispatch, getState) => {\r\n    //let {userId, text, date, dialogId}\r\n    let dialogId = getState().dialog.currentDialogId\r\n    let date = new Date().toISOString()\r\n\r\n    //   forming body of send message request\r\n    let messBody = {dialogId, text: messageText, userId: id, date }\r\n\r\n    dispatch(toggleMessaging(true))\r\n    let response = await  dialogAPI.sendMessage(messBody)\r\n\r\n    dispatch(addNewMessage({date, text: messageText, ownerId: getState().auth.myId}))\r\n    dispatch(toggleMessaging(false))\r\n    dispatch(reset('dialogMessage'));\r\n}\r\n\r\n\r\nexport const GetMessagesRequest = (id) => async (dispatch) => {\r\n    dispatch(toggleFetching(true))\r\n    let response = await dialogAPI.getDialog(id)\r\n\r\n    if (response.data.resultCode === 0)\r\n    {\r\n        dispatch(setMessages(response.data.data.messages, response.data.data.owner,\r\n            response.data.data.currentDialogId, response.data.data.totalMessagesCount))\r\n    }\r\n    dispatch(toggleFetching(false))\r\n}\r\n\r\nconst setDialogList = (dialogsTotalCount, dialogs) => {\r\n    return {type: SET_DIALOGS_LIST, dialogsTotalCount, dialogs}\r\n}\r\n\r\nexport const GetDialogsRequest = () => async (dispatch) => {\r\n    dispatch(toggleFetching(true))\r\n\r\n    let response = await dialogAPI.getDialogList()\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setDialogList(response.data.data.dialogsTotalCount, response.data.data.dialogs))\r\n    }\r\n    dispatch(toggleFetching(false))\r\n}\r\n\r\n","import React, {useEffect, useState} from 'react';\r\n\r\nimport {connect} from \"react-redux\";\r\nimport {compose} from \"redux\";\r\nimport {withRouter} from \"react-router-dom\";\r\n\r\nimport ElementNameHeader from \"../element-name-header/ElementNameHeader\";\r\nimport Dialog from \"./Dialog\";\r\nimport {AddNewMessageRequest, GetMessagesRequest} from \"../../../redux/reducers/dialogs-reducer\";\r\nimport Redirect from \"react-router-dom/es/Redirect\";\r\n\r\n\r\n\r\nconst DialogContainer = ({match, myId, GetMessagesRequest, isFetching, isMessaging, ...props}) => {\r\n\r\n    let userId =( match.params.userId) ? match.params.userId : myId;\r\n\r\n\r\n\r\n    const handleMessagesChange= () => {\r\n\r\n            GetMessagesRequest(userId)\r\n\r\n    }\r\n\r\n    useEffect(() => { handleMessagesChange()}, [match.params.userId, parseInt(userId)])\r\n\r\n    React.useEffect( () => {\r\n            let interval = setInterval( () => {\r\n                if (! isFetching && ! isMessaging)\r\n                    GetMessagesRequest(userId)\r\n            }, 3000)\r\n\r\n        return () => clearInterval(interval)\r\n    }, [isFetching, isMessaging])\r\n\r\n    return (<ElementNameHeader text={'dialog with id' + userId } >\r\n        {(myId && userId === myId) ? <Redirect to='/messages' /> :\r\n        <Dialog myId={myId} messages={props.messages}  owner={props.owner}\r\n            sendMessage={props.AddNewMessageRequest} />}\r\n    </ElementNameHeader>)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        //dialog state\r\n        messages: state.dialog.messages,\r\n        owner: state.dialog.owner,\r\n        totalMessagesCount: state.dialog.totalMessagesCount,\r\n\r\n        isAuth: state.auth.isAuth,\r\n        myId: state.auth.myId,\r\n\r\n        isFetching: state.dialog.isFetching,\r\n        isMessaging: state.dialog.isMessaging,\r\n    }\r\n}\r\n\r\nexport default compose(withRouter, connect(mapStateToProps, {\r\n    AddNewMessageRequest,\r\n    GetMessagesRequest\r\n}))(DialogContainer)","import React from 'react';\r\n\r\nimport {NavLink} from \"react-router-dom\";\r\nimport Link from \"../../../instruments/link/Link\";\r\nimport { withRouter} from \"react-router-dom\";\r\n\r\nimport { SinglePostBody} from \"../../../instruments/styles/Styles\";\r\nimport {LoginWelcomeText} from \"../../../login-register/LoginWelcome\";\r\n\r\nimport {Title} from \"../../wall/SinglePost\"\r\n\r\nimport styled from 'styled-components'\r\n\r\nimport {dateParse} from \"../../../../utils/date\";\r\n\r\nconst DialogBox = styled.div`\r\n    border-bottom: solid 1px #DAE1E8;\r\n    small {\r\n        color: gray;\r\n    }\r\n`\r\n\r\nconst LastMessageBox = styled.div`\r\n    margin: 5px;\r\n    padding: 5px;    \r\n    display: flex;\r\n    justify-content: ${ p => p.myPost ? 'right' : 'left'};    \r\n    -webkit-justify-content: ${ p => p.myPost ? 'flex-end' : 'flex-start'};  \r\n    \r\n    &:hover {\r\n        background: #eee;\r\n        cursor: pointer;\r\n    }\r\n    \r\n    div {\r\n        word-break: break-word;\r\n        padding: 5px;\r\n        border-radius: 3px;\r\n        background: ${ p => p.read ? '#eee' : '#DAE2EA'};    \r\n        max-width:80%;  \r\n        overflow: hidden; \r\n        display: -webkit-box;\r\n        -webkit-line-clamp: 3;\r\n        -webkit-box-orient: vertical;\r\n    }    \r\n    \r\n`\r\n\r\n\r\n\r\nconst DialogsList = ({dialogs, history, myId}) => {\r\n\r\n    if (dialogs === undefined || !dialogs || dialogs.length < 1)\r\n        return (\r\n            <LoginWelcomeText>\r\n                You have not dialogs yet, send message to your <NavLink to={'/friends'}>friend</NavLink>\r\n            </LoginWelcomeText>\r\n        )\r\n\r\n    return (\r\n        <>\r\n            {\r\n                dialogs.map((dialog) => {\r\n\r\n                    const toUserPage = () => history.push('/dialog' + dialog.user.userId)\r\n\r\n                    return <SinglePostBody imgWidth={100} key={dialog.user.userId}>\r\n                        <div onClick={toUserPage}>\r\n                            <img src={dialog.user.photo} width={100} alt={dialog.user.userId + \" userpic\"}/>\r\n                        </div>\r\n                        <DialogBox>\r\n                            <Title>\r\n                                <span>Dialog with&nbsp;</span>\r\n                                { (dialog.user.userId === myId) ?  <span>yourself</span> :\r\n                                    <b><Link to={'/id' + dialog.user.userId} linkName={dialog.user.fullName}/></b>\r\n                                }\r\n                                <br/>\r\n                                <small>Last message at {dateParse.toStrings(dialog.date)}</small>\r\n                            </Title>\r\n\r\n                                <LastMessageBox onClick={toUserPage}\r\n                                                myPost={dialog.lastMessage.ownerId === myId} read={ dialog.lastMessage.isRead}>\r\n                                    <div>{dialog.lastMessage.text} </div>\r\n                                </LastMessageBox>\r\n\r\n                        </DialogBox>\r\n                    </SinglePostBody>\r\n                })\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default withRouter(DialogsList)\r\n","import React, {useEffect, useState} from 'react';\r\n\r\nimport {connect} from \"react-redux\";\r\nimport {compose} from \"redux\";\r\nimport { withRouter} from \"react-router-dom\";\r\n\r\nimport {GetDialogsRequest} from \"../../../../redux/reducers/dialogs-reducer\";\r\n\r\nimport {ListContainerSection} from \"../../../instruments/styles/Styles\";\r\n\r\nimport ElementNameHeader from \"../../element-name-header/ElementNameHeader\";\r\nimport DialogsList from \"./DialogsList\";\r\n\r\n\r\nconst MyDialogListContainer = ({myId, isFetching, dialogs, GetDialogsRequest}) => { //GetDialogsRequest\r\n\r\n    useEffect(() => {\r\n        let interval = setInterval(() => {\r\n            if (!isFetching) {\r\n                GetDialogsRequest()\r\n            }\r\n        }, 7000)\r\n        return () => clearInterval(interval)\r\n    }, [isFetching])\r\n\r\n    useEffect( () => {\r\n        if (!isFetching) {\r\n            GetDialogsRequest()}\r\n    }, [])\r\n\r\n    return (<ElementNameHeader text={'my dialogs'}>\r\n        <ListContainerSection>\r\n            <DialogsList myId={myId} dialogs={dialogs}/>\r\n        </ListContainerSection>\r\n    </ElementNameHeader>)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        dialogsTotalCount: state.dialog.dialogsTotalCount,\r\n        dialogs: state.dialog.dialogs,\r\n        myId: state.auth.myId,\r\n        isFetching: state.dialog.isFetching,\r\n    }\r\n}\r\n\r\nexport default compose(withRouter, connect(mapStateToProps, {\r\n\r\n    GetDialogsRequest\r\n}))(MyDialogListContainer)","import React, {useEffect} from 'react';\nimport './App.css';\nimport {Route, withRouter} from \"react-router-dom\";\nimport {compose} from \"redux\";\nimport {connect} from \"react-redux\";\n\nimport {initApp} from \"./redux/reducers/init-reducer\";\n\nimport Header from \"./components/header/Header\";\nimport Preloader from \"./components/instruments/Preloader\";\n\nimport AlertsContainer from \"./components/sidebar/AlertsContainer\";\nimport Notes from \"./components/notes/Notes\";\nimport Login from \"./components/login-register/Login\";\nimport LoginRedirectTo from \"./components/login-register/LoginRedirectTo\";\nimport PhotosContainer from \"./components/photos/PhotosContainer\";\nimport Footer from \"./components/footer/Footer\";\nimport WallContainer from \"./components/profile/wall/WallContainer\";\nimport DialogContainer from \"./components/profile/dialog/DialogContainer\";\nimport MyDialogListContainer from \"./components/profile/dialog/dialogs-list/MyDialogListContainer\";\n\nconst ProfileContainer = React.lazy(() => import( \"./components/profile/ProfileContainer\"));\nconst Register = React.lazy(() => import( \"./components/login-register/Register\"));\nconst UsersContainer = React.lazy(() => import(\"./components/users/UsersContainer\"));\nconst FriendsContainer = React.lazy(() => import(\"./components/users/FriendsContainer\"));\n\nconst App = ({isInitialized, initApp, isAuth, myId}) => {\n\n    useEffect(() => initApp(), [isInitialized])\n    if (!isInitialized) return <Preloader/>\n    return (\n        <div className='main'>\n            <header className='pageHeader'>\n                <Header/>\n            </header>\n            <div className='sideBar'>\n                <AlertsContainer />\n            </div>\n            <div className='pageBody'>\n\n                <Route exact path='/' render={() =>\n                    <LoginRedirectTo conditionU={isAuth} path={\"/id\" + myId} />\n                }/>\n                <Route exact path='/id:userId?' component={() => <React.Suspense fallback={<Preloader/>}>\n                    <ProfileContainer/>\n                </React.Suspense>}/>\n\n                <Route exact path='/edit' component={() => <>\n\n                    <React.Suspense fallback={<Preloader/>}>\n                        < ProfileContainer isEdit={true}/>\n                    </React.Suspense>\n                </>}\n                />\n\n                <Route path='/friends:userId?/:pageNo?' render={(props) => (\n                        <React.Suspense fallback={<Preloader/>}>\n                            <FriendsContainer/>\n                        </React.Suspense>\n                    )}/>\n                <Route path='/users/:pageNo?' render={(props) => (\n                    <React.Suspense fallback={<Preloader/>}>\n                        <UsersContainer/>\n                    </React.Suspense>\n                )}/>\n\n                <Route path='/photos:userId?' component={PhotosContainer}/>\n\n                <Route path='/notes' component={Notes}/>\n\n                <Route path='/wall:userId?' component={WallContainer}/>\n\n                <Route exact path='/messages' component={MyDialogListContainer}/>\n                <Route exact path='/dialog:userId?' component={DialogContainer}/>\n\n\n                <Route path='/login' component={Login}/>\n                <Route path='/registration' render={ ()=> (\n                    <React.Suspense fallback={<Preloader/>}>\n                        <Register/>\n                    </React.Suspense>\n                )}\n                        />\n\n\n            </div>\n            <Footer />\n        </div>\n    );\n}\n\nconst mapStateToProps = (state) => {\n    return {\n           isInitialized: state.app.initialize,\n           isAuth: state.auth.isAuth,\n           myId: state.auth.myId\n    }\n}\n\nexport default compose( withRouter, connect(mapStateToProps, {initApp}) ) (App)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {applyMiddleware, combineReducers, createStore} from \"redux\";\nimport thunkMiddleware from \"redux-thunk\";\n\nimport {reducer as formReducer} from \"redux-form\"\n\nimport {profileReducer} from \"./reducers/profile-reducer\";\nimport {requestsReducer} from \"./reducers/requests-reducer\";\nimport {imagesReducer} from \"./reducers/images-reducer\";\nimport {usersReducer} from \"./reducers/users-reducer\";\nimport {initReducer} from \"./reducers/init-reducer\";\nimport {authReducer} from \"./reducers/auth-reducer\";\nimport {wallReducer} from \"./reducers/wall-reducer\";\nimport {dialogsReducer} from \"./reducers/dialogs-reducer\";\n\n\n\nconst rootReducer = combineReducers({\n    app: initReducer, profile: profileReducer, auth: authReducer, form: formReducer,\n    requests: requestsReducer, users: usersReducer, photos: imagesReducer,\n    wall: wallReducer, dialog: dialogsReducer\n})\n\nlet store = createStore(rootReducer, applyMiddleware(thunkMiddleware));\n\nexport default store","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {BrowserRouter, HashRouter} from \"react-router-dom\";\n\nimport {Provider} from \"react-redux\";\nimport store from \"./redux/store\";\n\n\nReactDOM.render(\n    <HashRouter>\n        <Provider store={store}>\n            <App/>\n        </Provider>\n    </HashRouter>, document.getElementById('root'));\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","//methods for date amd time manipulations\r\nexport const dateParse = {\r\n    toNumbers (date) {\r\n        return (new Date(date)).toLocaleDateString(\"en-Us\")\r\n    },\r\n\r\n    toStrings(date) {\r\n        const options = { year: 'numeric', month: 'long', day: 'numeric' ,  hour12: false, hour: 'numeric', minute: 'numeric'};\r\n        return (new Date(date)).toLocaleString(\"en-Us\", options)\r\n    },\r\n\r\n    toTimeString(date) {\r\n        return (new Date(date)).toLocaleTimeString().slice(0, -3)\r\n    },\r\n\r\n    toDayAndMonth(date){\r\n        const options = {month: 'long', day: 'numeric' }\r\n        return date.toLocaleString(\"en-Us\", options)\r\n    }\r\n}\r\n\r\n\r\nexport const dateCompare = {\r\n    isSameDay(date1, date2)\r\n    {\r\n        if (date1.getFullYear() !== date2.getFullYear())\r\n            return false\r\n        else if  (date1.getMonth() !== date2.getMonth())\r\n            return false\r\n        else if (date1.getDate() !== date2.getDate())\r\n            return false\r\n\r\n        return true\r\n    }\r\n}","\r\nexport const Arrays = {\r\n\r\n    findOneAndUpdate(items, itemName, itemValue, newProps) {\r\n        return items.map(item => {\r\n            if (item[itemName] == itemValue)\r\n                return {...item, ...newProps}\r\n            else\r\n                return item;\r\n        })\r\n    },\r\n\r\n    sortBy(items, itemName, reverse = false) {\r\n        let rev = reverse ? -1 : 1\r\n        return items.sort( (a, b) => {\r\n            if (a[itemName] < b[itemName]) return rev * -1;\r\n            if (a[itemName] > b[itemName]) return rev * 1;\r\n            return 0\r\n        })\r\n    },\r\n\r\n     getSomeRandom (users, COUNT) {\r\n         if (users.length <= COUNT)\r\n             return users;\r\n         else {\r\n             let arr = [];\r\n             let result = []\r\n\r\n             for (let i = 0; i < COUNT; i++) {\r\n                 let index = Math.floor(Math.random() * users.length);\r\n                 while (arr.includes(index)) {\r\n                     index = (index + 1) % users.length;\r\n                 }\r\n                 arr.push(index);\r\n                 result.push(users[index])\r\n             }\r\n             return result;\r\n         }\r\n     }\r\n\r\n}\r\n\r\n","import {authAPI} from \"../../oosocial-api/api\";\nimport {stopSubmit} from 'redux-form'\n\nlet initialState = {\n    myId: null,\n    email: null,\n    login: null,\n    isAuth: false,\n\n    isNewUserRegistered: false,\n    previousLocation: null\n}\n\nconst SET_AUTH = \"social-network/auth/SET_AUTH\"\nconst DELETE_AUTH = \"social-network/auth/DELETE_AUTH\"\nconst NEW_USER_REGISTER_SUCCESS = \"social-network/auth/NEW_USER_REGISTER_SUCCESS\"\nconst SET_PREVIOUS_LOCATION = \"social-network/auth/SET_PREVIOUS_LOCATION\"\n\nexport let authReducer = (state = initialState, action) => {\n\n    switch (action.type) {\n        case SET_AUTH:\n            return {...state, ...action.data, isAuth: true}\n        case DELETE_AUTH:\n            return {...initialState}\n        case NEW_USER_REGISTER_SUCCESS:\n            return {...state, isNewUserRegistered: true}\n        case SET_PREVIOUS_LOCATION:\n            return {...state, previousLocation: action.path}\n\n        default:\n            return state;\n    }\n}\n\nexport const setLocation = (path) => {return {type: SET_PREVIOUS_LOCATION, path }}\n\nconst setAuthParams = (myId, email, login) => { return {type: SET_AUTH, data: {myId, email, login}} }\nconst clearAuthParams = () => {return {type: DELETE_AUTH}}\n\n//инициализируем приложение, запрашиваем на сервере статус авторизации\nexport const getAuthRequest = () => async (dispatch) => {\n    let response = await authAPI.me()\n\n    if (response.data.resultCode === 0)\n    {\n        let {id, email, login} = response.data.data\n        dispatch(setAuthParams(id, email, login))\n    }\n    else dispatch(clearAuthParams())\n}\n\nexport const logout = () => async (dispatch) => {\n    let response = await authAPI.logout()\n    if (response.data.resultCode === 0)\n    {\n        dispatch(clearAuthParams())\n    }\n}\n\nexport const login = (email, password, rememberMe) => async (dispatch) => {\n    let response = await authAPI.login(email, password, rememberMe)\n\n    if (response.data.resultCode === 0)\n    {\n        dispatch(getAuthRequest())\n       // логинизация успешно выполнена\n    }\n    else\n    {\n        let err = (response.data.messages && (response.data.messages.length > 0) ? response.data.messages[0] : 'login error')\n        dispatch(stopSubmit('login', {_error: err}))\n    }\n}\n\nconst RegistrationSuccess = () => {return {type: NEW_USER_REGISTER_SUCCESS}}\n\n//(values.email, values.password, values.login, values.fullName)\nexport const register = (email, password, login, fullName) => async (dispatch) => {\n    let response = await authAPI.register(email, password, login, fullName)\n    if (response.data.resultCode === 0) {\n        debugger\n        dispatch(RegistrationSuccess());\n    }\n    else {\n        dispatch(stopSubmit(\"register\", {_error: response.data.messages[0] || \"Registration error\"}))\n    }\n\n    //register\n}\n\n","import {mediaAPI} from \"../../oosocial-api/api\";\nimport {stopSubmit} from \"redux-form\";\nimport {Arrays} from \"../../utils/array\";\n\nlet initialState = {\n    items: [],\n    totalCount: 0,\n    currentUploading: null,\n    isProfilePhotoSet: false\n}\n\nconst SET_PHOTOS = 'social-network/user-photos/SET_PHOTOS';\nconst SET_IMAGE_ORDER = 'social-network/user-photos/SET_IMAGE_ORDER';\nconst TOGGLE_PHOTO_SET = 'social-network/user-photos/TOGGLE_PHOTO_SET';\nconst ADD_DESCRIPTION = 'social-network/user-photos/ADD_DESCRIPTION'\n\nexport const imagesReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case SET_PHOTOS:\n            return {\n                ...state, items: [...action.photos], totalCount: action.count\n            }\n        case SET_IMAGE_ORDER:\n            return {...state, currentUploading: action.order}\n        case TOGGLE_PHOTO_SET:\n            return {...state, isProfilePhotoSet: action.togglePhotoSet}\n        case ADD_DESCRIPTION:\n            return { ...state, items:  Arrays.findOneAndUpdate(state.items, \"id\", action.id, {description: action.description})\n        }\n        default:\n            return state;\n    }\n}\n\nconst setPhotos = (photos, count) => {return {type: SET_PHOTOS, photos, count}}\n\nexport const getPhotosRequest = (userId) => async (dispatch) => {\n        const response = await mediaAPI.getPhotos(userId);\n        if (response.data.items)\n            dispatch(setPhotos(response.data.items, response.data.totalCount))\n}\n\n\n//---action задаёт порядковый номер загруженного файла\nconst setUploadingImageOrder = (order) => {return {type: SET_IMAGE_ORDER, order}}\n\nexport const uploadPhotosRequest = (photos) => async (dispatch, getState) => {\n    let i = 1;\n    for (const item of photos) {\n        dispatch(setUploadingImageOrder(i++))\n        const response = await mediaAPI.savePhoto(item)\n        if (response.data.resultCode === 0) {\n        } else {\n            dispatch(stopSubmit(\"upload_image\", {_error: response.data.messages[0] || \"Image loading error\"}))\n        }\n    }\n    dispatch(setUploadingImageOrder(null))\n    const myId = getState().auth.myId\n    dispatch(getPhotosRequest(myId))\n}\n\nconst setProfilePhoto = (togglePhotoSet) => { return {type: TOGGLE_PHOTO_SET, togglePhotoSet}}\n\nexport const setImageAsProfilePhoto  = (id) => async (dispatch) => {\n    dispatch(setProfilePhoto(true))\n    const response = await mediaAPI.setAsProfilePhoto(id)\n    if (response.data.resultCode === 0)\n    {\n\n        dispatch(setProfilePhoto(false))}\n}\n\nexport const deletePhoto  = (id) => async (dispatch) => {\n    dispatch(setProfilePhoto(true))\n    const response = await mediaAPI.deletePhoto(id)\n    if (response.data.resultCode === 0)\n    {\n        dispatch(getPhotosRequest(\"\"))\n        dispatch(setProfilePhoto(false))}\n}\n\nconst addImageDescription = (id, description) => {return {type: ADD_DESCRIPTION, id, description}}\n\nexport const updateImageDescription = (id, description) => async (dispatch) =>{\n    const response = await mediaAPI.updateImage(id, description)\n    if (response.data.resultCode === 0)\n    {\n        dispatch(addImageDescription(id, description))\n    }\n}\n\n\n\n","import s from './Buttons.module.css';\nimport React from \"react\";\n\nconst Button = (props) => {\n        if (props.isNonButton)\n                return <label className={s.follow__button}>\n                        <span>{props.children}</span>\n                </label>\n        return <button className={s.follow__button} {...props}  onClick={props.onClick}> {props.children} </button>;\n\n}\nexport default Button;","import React from \"react\";\n\nimport fetchingPic from \"../../media/3Bta.gif\"\n\nconst Preloader = () => {\nreturn <div>\n    <img src={fetchingPic} alt={'loading in process...'}/>\n</div>\n}\nexport default Preloader;","export const SET_TOGGLE_FOLLOWING = 'social-network/users-following/SET_TOGGLE_FOLLOWING'\r\n\r\n//add user id to list of just following users\r\nconst setToggleFollowing = (isToggling, id) => { return {type: SET_TOGGLE_FOLLOWING, isToggling, id}}\r\n\r\n//общий метод для запроса фолловинга или анфолловинга, передаём метод запроса к api\r\n//и состояние фолоовинга, которое надо установить в state\r\nexport const followOrUnFollowG = async (id, followMethod, isFollowing, setFollowing, dispatch) =>  {\r\n    dispatch(setToggleFollowing(true, id))\r\n    // запрос к апи\r\n    let response = await followMethod(id)\r\n    if (response.data.resultCode === 0) {\r\n        //unfollow action createrl\r\n        dispatch(setFollowing(id, isFollowing))\r\n        //stop freezing follow button for current user\r\n        dispatch(setToggleFollowing(false, id))\r\n\r\n    }\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imagesPanel\":\"Photos_imagesPanel__1JHMY\",\"image__preview\":\"Photos_image__preview__2-6Wp\",\"imagesControl\":\"Photos_imagesControl__1I9vo\",\"imagesControl__navigation\":\"Photos_imagesControl__navigation__3Yio-\",\"imagesControl__upload\":\"Photos_imagesControl__upload__23Wy3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sideBar__nav\":\"SideBar_sideBar__nav__4vp-t\",\"sideBar__profileLi\":\"SideBar_sideBar__profileLi__1qVVQ\",\"sideBar__nav__profile\":\"SideBar_sideBar__nav__profile__o5Ygo\",\"sideBar__nav__profile_edit\":\"SideBar_sideBar__nav__profile_edit__34URJ\",\"sideBar__navLi\":\"SideBar_sideBar__navLi__11uoV\"};","export const required = value => {\r\n\r\n    if (value && value.length > 0) {\r\n        return undefined\r\n    }\r\n    return \"Field is required\"\r\n}\r\n\r\nexport const minLength = (minlength) => (value) => {\r\n    if (value && value.length < minlength) {\r\n        return `field must consist more ${minlength} symbols`\r\n    }\r\n    return undefined\r\n}\r\n\r\n//оющая ошибка для формы с подтверждением пароля\r\nexport const validate = values => {\r\n\r\n    if ( values.password === values.password2)\r\n        return undefined\r\n    else\r\n        return {password2: 'Passwords confirm is not valid'}\r\n\r\n}","import React from \"react\";\n\nimport styled from \"styled-components\"\n\nexport const LoginWelcomeText = styled.p`\n    text-align: justify;\n    line-height: 1.7;\n    text-indent: 15px;\n    padding: 0 20px;\n`;\n\nconst LoginWelcome = ({count}) => {\n\n    let suffix = (count === 3) ? \"rd\" : \"th\"\n\n    return (<>\n            <LoginWelcomeText>\n\n                Welcome to OOSocial - network for developers, designers and other people who love IT,\n                searching for a job or searching for a workers.\n                Registered users can share their profiles, follow another users and upload your photos. And yes, we will add\n                the Wall soon!\n            </LoginWelcomeText>\n            <LoginWelcomeText>\n                Became a <b>{count + suffix}</b> user in OOSocial.\n            </LoginWelcomeText>\n        </>\n    )\n}\n\nexport default  LoginWelcome","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navLink\":\"Link_navLink__dYPCG\",\"navLink__disabled\":\"Link_navLink__disabled__qvAc5\"};","import React from 'react';\n\nimport s from  '../Forms.module.css'\n\n//отделить св-во инпута для передачи дальше в redux-form\nconst TextBox = ({meta, input, label, multiline, ...props}) => {\n    let isError = meta.touched && meta.error\n    return (\n        <div>\n            {label && <div className={s.formLabel}>{label}</div> }\n\n            {!!multiline ? <textarea {...input} {...props} /> :\n                <input {...input} {...props}  /> }\n            {isError && <div className={s.formError}>{meta.error}</div> }\n        </div>\n    )}\nexport default TextBox","import {wallAPI} from \"../../oosocial-api/api\";\r\n\r\nconst initialState={\r\n    userId: 2, //id of wall owner, post owner id can equals with wall owner\r\n    posts: [\r\n        { postId: 1, date: \"2020-02-10T22:06:17.762Z\", text: \"Hello, my friend\\n:)\",\r\n            owner: {userId: 2, photo: \"https://s5o.ru/storage/simple/ru/edt/82/57/c6/1b/ruef2b9f9c218.jpg\",\r\n                fullName: \"Eldar Sh\"} }\r\n    ],\r\n    totalCount: 14,\r\n\r\n    isFetching: false //waiting for new post uploaded\r\n}\r\n\r\nconst TOGGLE_FETCHING = 'social-network/wall/TOGGLE_FETCHING'\r\nconst SET_POSTS = 'social-network/wall/SET_POSTS'\r\n\r\nconst ADD_NEW_POST = 'social-network/wall/ADD_NEW_POST'\r\n\r\n\r\nexport const wallReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case TOGGLE_FETCHING:\r\n            return {...state, isFetching: action.isFetching}\r\n        case SET_POSTS:\r\n            return {...state, posts: [...action.posts], totalCount: action.count, userId: action.userId}\r\n\r\n        case ADD_NEW_POST:\r\n            return {...state, posts: [action.post, ...state.posts], totalCount: state.totalCount + 1}\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nconst setFetching = (isFetching) => {return {type: TOGGLE_FETCHING, isFetching}}\r\n\r\nconst setPosts = (posts, count, userId) => {return {type: SET_POSTS, posts, count, userId}}\r\n\r\nexport const addNewPost = post =>{ return {type: ADD_NEW_POST, post}}\r\n\r\n\r\n\r\nexport const AddNewPostRequest = (id, text) => async (dispatch) => {\r\n    let response = await wallAPI.addPost(id, text)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(addNewPost(response.data.post))\r\n    }\r\n}\r\n\r\nexport const getWallRequest = (id) => async (dispatch) => {\r\n    dispatch(setFetching(true))\r\n    let response = await wallAPI.getWall(id)\r\n    if (response.data.resultCode === 0)\r\n    {\r\n        dispatch(setPosts(response.data.data.posts, response.data.data.totalCount, response.data.data.userId))\r\n    }\r\n    dispatch(setFetching(false))\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","import * as axios from 'axios'\r\n\r\n//настройка подключения к удалённому серверу\r\n/*\r\nconst instance = axios.create({\r\n    baseURL: process.env.REACT_APP_BASE_URL_SAMURAI,\r\n    withCredentials: true,\r\n    headers: {'API-KEY': process.env.REACT_APP_API_KEY_SAMURAI}\r\n});\r\n*/\r\n\r\n\r\nconst BASE_URL = (process.env.NODE_ENV  === 'development') ?\r\n    process.env.REACT_APP_BASE_URL_DEV : 'https://oo-server.herokuapp.com/api/'\r\n//настройка подключения к локальному серверу\r\n\r\nconst instance = axios.create({\r\n    baseURL: BASE_URL,\r\n    withCredentials: true\r\n});\r\n\r\nconst savePhotoSingle = (route, photo) => {\r\n    const formData = new FormData()\r\n    formData.append('image', photo)\r\n    return instance.put(route, formData, {\r\n        headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n        }\r\n    })\r\n}\r\n\r\n\r\nexport const usersAPI = {\r\n\r\n    getByPage(page = 1) {\r\n        return instance.get('users?page=' + page);\r\n    },\r\n\r\n    follow(id) {\r\n        return instance.post('follow/' + id)\r\n    },\r\n\r\n    unfollow(id) {\r\n        return instance.delete('follow/' + id)\r\n    },\r\n\r\n    getFriends(page = 1) {\r\n        return instance.get('friends?page=' + page);\r\n    },\r\n\r\n    getFriendsById(page = 1, id) {\r\n        return instance.get(`friends?page=${page}&id= ${id}`);\r\n    }\r\n}\r\n\r\nexport const profileAPI = {\r\n\r\n    getStatus(id) {\r\n        return instance.get('profile/status/' + id)\r\n    },\r\n\r\n    setStatus(statusText) {\r\n        return instance.put('profile/status/', {status: statusText})\r\n    },\r\n\r\n    getUserProfile(id) {\r\n        return instance.get('profile/' + id)\r\n    },\r\n\r\n    setProfile(profile) {\r\n        return instance.put('profile/', profile)\r\n    },\r\n\r\n\r\n    getFollowStatus(id) {\r\n        return instance.get('follow/' + id)\r\n    },\r\n\r\n    savePhoto(photo) {\r\n        return savePhotoSingle('profile/photo/', photo)\r\n    }\r\n\r\n\r\n}\r\n\r\nexport const authAPI = {\r\n    me() {\r\n        return instance.get('auth/me')\r\n    },\r\n\r\n    logout() {\r\n        return instance.delete('auth/login')\r\n    },\r\n\r\n    login(email, password, rememberMe) {\r\n        return instance.post('auth/login', {email, password, rememberMe})\r\n    },\r\n    register(email, password, login, fullName) {\r\n        return instance.post('auth/register', {email, password, login, fullName})\r\n    }\r\n}\r\n\r\n\r\nexport const mediaAPI = {\r\n    getPhotos(id) {\r\n        return instance.get('/photos?id=' + id)\r\n    },\r\n\r\n    savePhoto(photo) {\r\n        return savePhotoSingle('photo/', photo)\r\n    },\r\n\r\n    setAsProfilePhoto(id) {\r\n        return instance.put('photo/profile?id=' + id)\r\n    },\r\n\r\n    deletePhoto(id){\r\n        return instance.delete('photo?id=' + id)\r\n    },\r\n    updateImage(id, description) {\r\n        return instance.post('photo/update', {id, description})\r\n    }\r\n}\r\n\r\nexport const wallAPI = {\r\n    getWall(id) {\r\n        return instance.get('wall?id=' + id)\r\n    },\r\n\r\n    addPost(userId, text) {\r\n       return instance.post('wall', {userId, text})\r\n    }\r\n}\r\n\r\nexport const dialogAPI = {\r\n\r\n    getDialog(id) {\r\n        return instance.put('dialog?id=' + id)\r\n    },\r\n\r\n    sendMessage(payload) {\r\n        return instance.post('dialog/message', payload)\r\n    },\r\n\r\n    getDialogList() {\r\n        return instance.get('dialogs')\r\n    },\r\n\r\n    getMessagesUnread (){\r\n        return instance.get('dialogs/unread')\r\n    }\r\n\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"badgeProfile__header\":\"BadgeHeader_badgeProfile__header__1K1kq\",\"badgeProfile__header_open\":\"BadgeHeader_badgeProfile__header_open___GFCr\",\"badgeProfile__header_roll\":\"BadgeHeader_badgeProfile__header_roll__3zMKS\"};","import {usersAPI} from \"../../oosocial-api/api\";\r\nimport {Arrays} from \"../../utils/array\";\r\n\r\nimport {followOrUnFollowG, SET_TOGGLE_FOLLOWING} from './follow-unversal'\r\n\r\nconst initialState={\r\n    users: [\r\n        { id: 0, name: \"home\", status: \"i'm fattest\", followed: false, photos: {small: null, large:null}} ,\r\n        { id: 1, name: \"street\", status: \"i'm smallest\", followed: true, photos: {small: null, large:null}},\r\n        { id: 2, name: \"aubo rdadje\", status: \"i'm smallest\", followed: true, photos: {small: null, large:null}},\r\n        { id: 3, name: \"Ofre nmd\", status: \"i'm smallest\", followed: true, photos: {small: null, large:null}}\r\n    ],\r\n    totalCount: 600,\r\n    error: null,\r\n\r\n    currentPage: 1,\r\n    pageSize: 10,\r\n\r\n    isFetching: false,\r\n\r\n    isToggling: [],\r\n\r\n    friends: {\r\n        profiles: [],\r\n        totalCount: 0\r\n    }\r\n}\r\n\r\nconst TOGGLE_FETCHING = 'social-network/users-search/TOGGLE_FETCHING'\r\nconst SET_USERS = 'social-network/users-search/SET_USERS'\r\nconst SET_USERS_PAGE = 'social-network/users-search/SET_USERS_PAGE'\r\nconst CHANGE_FOLLOWING_STATUS = 'social-network/users-search/CHANGE_FOLLOWING_STATUS'\r\n\r\nconst SET_FRIENDS = 'social-network/users-search/SET_FRIENDS'\r\n\r\n\r\nexport const usersReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case TOGGLE_FETCHING:\r\n            return {...state, isFetching: action.isFetching}\r\n        case SET_USERS:\r\n            return {...state, users: [...action.users], totalCount: action.count}\r\n        case SET_USERS_PAGE:\r\n            return {...state, currentPage: action.page}\r\n\r\n        case SET_TOGGLE_FOLLOWING:\r\n            if (action.isToggling)\r\n                return {...state, isToggling: [action.id, ...state.isToggling]}\r\n            else return {\r\n                ...state, isToggling: state.isToggling.filter((id) => {\r\n                    return (id !== action.id)\r\n                })}\r\n        case CHANGE_FOLLOWING_STATUS:\r\n            return {\r\n                ...state, users: Arrays.findOneAndUpdate(state.users, \"id\", action.id, {followed: action.isFollow})\r\n                }\r\n\r\n        case SET_FRIENDS:\r\n            return {...state, friends:{ profiles: [...action.friends], totalCount: action.totalCount}}\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nconst setFetching = (isFetching) => {return {type:TOGGLE_FETCHING, isFetching}}\r\nconst setUsers = (users, count) => {return {type: SET_USERS, users, count}}\r\n\r\nexport const setCurrentPage = (page) => {return {type: SET_USERS_PAGE, page}}\r\n\r\nexport const getUsers = (page) => async (dispatch) => {\r\n        dispatch(setFetching(true))\r\n\r\n        let response = await usersAPI.getByPage(page);\r\n        if (response.data.items)\r\n        {\r\n                dispatch(setUsers(response.data.items, response.data.totalCount))\r\n                dispatch(setFetching(false))\r\n        }\r\n}\r\n\r\n\r\n//set following status for user by id\r\nconst setFollowingStatus = (id, isFollow) => { return {type: CHANGE_FOLLOWING_STATUS, id, isFollow}\r\n}\r\n\r\nexport const beginFollowing = (id) => {\r\n    return async (dispatch) => {\r\n        followOrUnFollowG(id, usersAPI.follow.bind(usersAPI), true, setFollowingStatus, dispatch)\r\n    }\r\n}\r\n\r\nexport const endFollowing = (id) => {\r\n    return async (dispatch) => {\r\n        followOrUnFollowG(id, usersAPI.unfollow.bind(usersAPI), false, setFollowingStatus, dispatch)\r\n    }\r\n}\r\n\r\n\r\n//--------------------- friends request------------------------------------\r\nconst getFriendsRequest = async (page, id, setFriendsMethod, dispatch) => {\r\n    const response = await usersAPI.getFriendsById(page, id);\r\n    if (response.data.resultCode === 0)\r\n        dispatch(setFriendsMethod(response.data.items, response.data.totalCount))\r\n}\r\n\r\nconst setFriends = (friends, totalCount) => {return {type: SET_FRIENDS, friends, totalCount}}\r\n\r\nexport const getFriendsByPage = (page, id) => async (dispatch) => {\r\n    dispatch(setFetching(true))\r\n    await getFriendsRequest(page, id, setUsers, dispatch);\r\n    dispatch(setFetching(false))\r\n}\r\n\r\nexport const getFriendsById = (page, id) => async (dispatch) => {\r\n    getFriendsRequest(page, id, setFriends, dispatch);\r\n}\r\n\r\n\r\n\r\n\r\n","import {profileAPI, usersAPI} from '../../oosocial-api/api'\nimport {stopSubmit} from 'redux-form'\nimport {followOrUnFollowG} from \"./follow-unversal\";\n\nlet initialState = {\n    user: {},\n    communities: ['community of people who promised himself go to sleep as soon as back from work',\n                    '====== PhYSiCaL fAcUlTy ArE bEsToFtHeBeStOfThEbEsTs!!!! =====',\n                    '&#9733;&#9733;&#9733; all new Films of 2008. Watch online! &#9733;&#9733;&#9733;',\n                    'only VIP'],\n    statusText: '',\n\n    profileUpdateFetching: false,\n\n    profileFetch: true,\n\n    isProfileFollow: false\n    /*\n    posts: [\n        {text: 'post1', like: 1}, {text: 'post2', like: 2}\n    ]*/\n}\n\nconst SET_STATUS = 'social-network/user-profile/SET_STATUS'\nconst SET_PROFILE = 'social-network/user-profile/SET_PROFILE'\nconst SET_PHOTO = 'social-network/user-profile/SET_PHOTO'\n\nconst SET_FOLLOW_STATUS = 'social-network/user-profile/SET_FOLLOW_STATUS'\n\nconst UPDATE_PROFILE_FETCHING = 'social-network/user-profile/UPDATE_PROFILE_FETCHING'\nconst GET_PROFILE_FETCH_TOGGLE = 'social-network/user-profile/GET_PROFILE_FETCH_TOGGLE'\n\nexport let profileReducer = (state = initialState, action) => {\n\n    switch (action.type) {\n        case SET_PROFILE:\n            return {...state, user: action.userProfile}\n\n        case SET_STATUS:\n            return {...state, statusText: action.statusText}\n        case SET_PHOTO:\n            let newState = {...state, user: {...state.user, photos: action.photos}}\n            return newState\n\n        case SET_FOLLOW_STATUS:\n            return {...state, isProfileFollow: action.isFollow}\n\n        case UPDATE_PROFILE_FETCHING:\n            return {...state, profileUpdateFetching: action.isFetching}\n\n        case GET_PROFILE_FETCH_TOGGLE:\n            return {...state, profileFetch: action.isFetching}\n\n        default:\n            return state;\n    }\n}\n\nconst setStatus = (statusText) => { return {type: SET_STATUS, statusText} }\n\nconst setProfile = (userProfile) => { return {type: SET_PROFILE, userProfile} }\n\nconst uploadPhotoSuccess = (photos) => { return {type: SET_PHOTO, photos} }\n\nconst uploadProfileFetching = (isFetching) => { return {type: UPDATE_PROFILE_FETCHING, isFetching} }\n\nconst setFollowStatus = (id, isFollow) => { return {type: SET_FOLLOW_STATUS, isFollow} }\n//запрос статуса фолловинга (для зарегистрированных пользователей)\nconst getFollowStatus = (id) => async (dispatch) => {\n    const response = await profileAPI.getFollowStatus(id)\n    if (response.data) {\n        dispatch(setFollowStatus(id, response.data.isFollow))\n    }\n}\n\nconst getProfileFetch = (isFetching) => {return {type: GET_PROFILE_FETCH_TOGGLE, isFetching}}\n//тестовый вариант санккриэйтора для локальной БД\nexport const getProfileRequest = (id) => async (dispatch, getState) => {\n    dispatch(getProfileFetch(true))\n    const response = await profileAPI.getUserProfile(id)\n\n    if (response.data)\n    {\n        const myId = getState().auth.myId\n        if (myId && (myId !== id)){\n            dispatch(getFollowStatus(id))}\n        dispatch(setProfile(response.data))\n        dispatch(getProfileFetch(false))\n    }\n}\n\n\nexport const setStatusRequest = (statusText) => async (dispatch) => {\n    const response = await profileAPI.setStatus(statusText)\n    if (response.data.resultCode === 0) {\n        dispatch(setStatus(statusText))\n    }\n}\n\nexport const getStatusRequest = (id) => async (dispatch) => {\n    const response = await profileAPI.getStatus(id)\n        dispatch(setStatus(response.data))\n}\n\n//\nexport const uploadProfile = (profile) => async (dispatch, getState) => {\n    //get current user id in state for loading my new profile page\n    const myId = getState().auth.myId\n    dispatch(uploadProfileFetching(true))\n    const response = await  profileAPI.setProfile(profile)\n    if (response.data.resultCode === 0)\n    {\n        //alert(getContactError(\"Invalid url format (Contacts->Facebook)\"))\n        dispatch(getProfileRequest(myId))\n        dispatch(uploadProfileFetching(false))\n    }\n    else {\n        //parse error message to get info about current field\n        let errMessage = (response.data.messages && (response.data.messages.length > 0)) ? response.data.messages[0] : 'update profile error'\n        let contactError = getContactError(errMessage)\n        if (contactError)\n        {\n            const submitERROR = JSON.parse(`{\"${contactError}\":\"${errMessage}\"}`)\n            dispatch(stopSubmit('updateProfile', {\"contacts\": submitERROR}))\n        }\n        else\n            dispatch(stopSubmit('updateProfile', {_error: errMessage}))\n    }\n}\n\n\n//parse error message while form update\nconst getContactError = (message) => {\n    let contactsPos = -1\n    contactsPos  = message.indexOf('Contacts->')\n    if (contactsPos > 0)\n    {\n        let result = message.slice(contactsPos + 10)\n        result = result.slice(0, result.indexOf(')'))\n        if (result.length > 1)\n            return result.toLowerCase()\n    }\n    return null\n}\n\nexport const uploadPhoto = (photo) => async (dispatch) => {\n    const response = await profileAPI.savePhoto(photo)\n\n    if (response.data.resultCode === 0) {\n        dispatch(uploadPhotoSuccess(response.data.photos))\n    }\n    else\n    {\n        dispatch(stopSubmit(\"upload_image\", {_error: response.data.messages[0] || \"Image loading error\"}))\n    }\n}\n\n\nexport const singleProfileFollow = (id) => async (dispatch) => {\n    followOrUnFollowG(id, usersAPI.follow.bind(usersAPI), true, setFollowStatus,dispatch)\n}\n\nexport const singleProfileUnfollow = (id) => async (dispatch) => {\n    followOrUnFollowG(id, usersAPI.unfollow.bind(usersAPI), false, setFollowStatus, dispatch)\n}\n\n","import React from 'react';\r\n\r\nimport Link from \"../../instruments/link/Link\";\r\n\r\nimport s from  '../user-status/UserStatus.module.css'\r\nimport styled from 'styled-components'\r\n\r\nimport {dateParse} from \"../../../utils/date\";\r\nimport {SinglePostBody} from \"../../instruments/styles/Styles\";\r\n\r\nexport const Title = styled.div`\r\n    background: #eee;\r\n    padding: 5px;\r\n    border-top: 1px solid  #45688E;\r\n    border-bottom: 1px solid #ccc;\r\n`;\r\n\r\nconst Text = styled.p`\r\n    white-space: pre;\r\n    line-height: 1.3;\r\n    padding: 5px;\r\n    margin: 0 2px;\r\n`;\r\n\r\nconst PostFooter = styled.div`\r\n    padding: 2px 5px;\r\n    border-bottom: solid 1px #DAE1E8;\r\n    font-size: 88%\r\n`;\r\n\r\nconst SinglePost = ({post}) => {\r\n\r\n    const date = dateParse.toStrings(post.date)\r\n    return (\r\n        <SinglePostBody imgWidth={50}>\r\n            <div>\r\n                <img src={post.owner.photo} alt={post.owner.fullName + \" photo\"} width={50}/>\r\n            </div>\r\n            <div>\r\n                <Title>\r\n                    <b><Link to={\"/id\" + post.owner.userId} linkName={post.owner.fullName}/></b>&nbsp;posts at <br/>\r\n                    <div className={s.userStatus__lastUpdate}>\r\n                        {date}\r\n                    </div>\r\n                </Title>\r\n                <Text>\r\n                    {post.text}\r\n                </Text>\r\n                <PostFooter>\r\n                    <Link to={\"/wall\" + post.owner.userId} linkName={\"Write on this user's wall\"} />\r\n                    &nbsp; &ndash; &nbsp;\r\n                    <Link to={\"/dialog\" + post.owner.userId} linkName={\"Send private message\"} />\r\n                </PostFooter>\r\n            </div>\r\n\r\n        </SinglePostBody>\r\n    )\r\n}\r\n\r\nexport  default SinglePost","import  React from 'react'\r\nimport {Field, reduxForm} from \"redux-form\";\r\n\r\nimport TextBox from \"./inputs-validate/TextBox\";\r\nimport Button from \"../instruments/buttons/Button\";\r\n\r\nimport styled from 'styled-components'\r\nimport {required} from \"./forms-validators\";\r\n\r\nconst MessageContainer = styled.form`\r\n    padding: 5px;    \r\n    textarea {\r\n        width: 99%;\r\n        resize: vertical;\r\n    }\r\n`\r\n\r\nconst PostSubmit = styled.div`\r\n    display: grid;\r\n    justify-content: right;\r\n    padding-top : 3px;\r\n`\r\n\r\nconst PostAddForm = (props) => {\r\n    return (\r\n\r\n        <MessageContainer onSubmit={props.handleSubmit}>\r\n\r\n            <Field name=\"text\" component={TextBox} multiline={true} validate={[required]} />\r\n            <PostSubmit>\r\n                <Button> Add post </Button>\r\n            </PostSubmit>\r\n        </MessageContainer>\r\n\r\n    )\r\n}\r\n\r\nexport default PostAddForm","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileHeader\":\"ElementNameHeader_profileHeader__2z4fU\",\"profileBorder\":\"ElementNameHeader_profileBorder__LZK2W\",\"profileBorder__subBorder\":\"ElementNameHeader_profileBorder__subBorder__NTq6q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"follow__button\":\"Buttons_follow__button__3x7cz\",\"follow__button_stretched\":\"Buttons_follow__button_stretched__2Qd4p\"};"],"sourceRoot":""}